<pre class="Agda"><a id="5" class="Keyword">module</a> <a id="12" href="Type.BetaNBE.html" class="Module">Type.BetaNBE</a> <a id="25" class="Keyword">where</a>
</pre>
## Imports

<pre class="Agda">
<a id="53" class="Keyword">open</a> <a id="58" class="Keyword">import</a> <a id="65" href="Function.html" class="Module">Function</a> <a id="74" class="Keyword">using</a> <a id="80" class="Symbol">(</a><a id="81" href="Function.Base.html#1040" class="Function Operator">_∘_</a><a id="84" class="Symbol">;</a><a id="85" href="Function.Base.html#624" class="Function">id</a><a id="87" class="Symbol">)</a>
<a id="89" class="Keyword">open</a> <a id="94" class="Keyword">import</a> <a id="101" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="110" class="Keyword">using</a> <a id="116" class="Symbol">(</a><a id="117" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a><a id="120" class="Symbol">;</a><a id="121" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a><a id="123" class="Symbol">;</a><a id="124" href="Data.Vec.Base.html#1062" class="InductiveConstructor Operator">_∷_</a><a id="127" class="Symbol">)</a> <a id="129" class="Keyword">renaming</a> <a id="138" class="Symbol">(</a><a id="139" href="Data.Vec.Base.html#2589" class="Function">map</a> <a id="143" class="Symbol">to</a> <a id="146" class="Function">vmap</a><a id="150" class="Symbol">)</a>
<a id="152" class="Keyword">open</a> <a id="157" class="Keyword">import</a> <a id="164" href="Data.List.html" class="Module">Data.List</a> <a id="174" class="Keyword">using</a> <a id="180" class="Symbol">(</a><a id="181" href="Agda.Builtin.List.html#147" class="Datatype">List</a><a id="185" class="Symbol">;</a><a id="186" href="Data.List.Base.html#10392" class="InductiveConstructor">[]</a><a id="188" class="Symbol">;</a><a id="189" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">_∷_</a><a id="192" class="Symbol">;</a><a id="193" href="Data.List.Base.html#1553" class="Function">map</a><a id="196" class="Symbol">)</a>
<a id="198" class="Keyword">open</a> <a id="203" class="Keyword">import</a> <a id="210" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="219" class="Keyword">using</a> <a id="225" class="Symbol">(</a><a id="226" href="Data.Sum.Base.html#743" class="Datatype Operator">_⊎_</a><a id="229" class="Symbol">;</a><a id="230" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a><a id="234" class="Symbol">;</a><a id="235" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a><a id="239" class="Symbol">)</a>

<a id="242" class="Keyword">open</a> <a id="247" class="Keyword">import</a> <a id="254" href="Utils.html" class="Module">Utils</a> <a id="260" class="Keyword">using</a> <a id="266" class="Symbol">(</a><a id="267" href="Utils.html#6768" class="Datatype">Kind</a><a id="271" class="Symbol">;</a><a id="272" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="273" class="Symbol">;</a><a id="274" href="Utils.html#6860" class="InductiveConstructor Operator">_⇒_</a><a id="277" class="Symbol">;</a><a id="278" href="Utils.html#6822" class="InductiveConstructor">♯</a><a id="279" class="Symbol">)</a>
<a id="281" class="Keyword">open</a> <a id="286" class="Keyword">import</a> <a id="293" href="Type.html" class="Module">Type</a> <a id="298" class="Keyword">using</a> <a id="304" class="Symbol">(</a><a id="305" href="Type.html#515" class="Datatype">Ctx⋆</a><a id="309" class="Symbol">;</a><a id="310" href="Type.html#545" class="InductiveConstructor Operator">_,⋆_</a><a id="314" class="Symbol">;</a><a id="315" href="Type.html#1704" class="Datatype Operator">_⊢⋆_</a><a id="319" class="Symbol">;</a><a id="320" href="Type.html#887" class="Datatype Operator">_∋⋆_</a><a id="324" class="Symbol">;</a><a id="325" href="Type.html#921" class="InductiveConstructor">Z</a><a id="326" class="Symbol">;</a><a id="327" href="Type.html#960" class="InductiveConstructor">S</a><a id="328" class="Symbol">)</a>
<a id="330" class="Keyword">open</a> <a id="335" href="Type.html#1704" class="Module Operator">_⊢⋆_</a>
<a id="340" class="Keyword">open</a> <a id="345" class="Keyword">import</a> <a id="352" href="Type.BetaNormal.html" class="Module">Type.BetaNormal</a> <a id="368" class="Keyword">using</a> <a id="374" class="Symbol">(</a><a id="375" href="Type.BetaNormal.html#1002" class="Datatype Operator">_⊢Nf⋆_</a><a id="381" class="Symbol">;</a><a id="382" href="Type.BetaNormal.html#1071" class="Datatype Operator">_⊢Ne⋆_</a><a id="388" class="Symbol">;</a><a id="389" href="Type.BetaNormal.html#2049" class="Function">renNf</a><a id="394" class="Symbol">;</a><a id="395" href="Type.BetaNormal.html#2101" class="Function">renNe</a><a id="400" class="Symbol">)</a>
<a id="402" class="Keyword">open</a> <a id="407" href="Type.BetaNormal.html#1002" class="Module Operator">_⊢Nf⋆_</a>
<a id="414" class="Keyword">open</a> <a id="419" href="Type.BetaNormal.html#1071" class="Module Operator">_⊢Ne⋆_</a>
<a id="426" class="Keyword">open</a> <a id="431" class="Keyword">import</a> <a id="438" href="Type.RenamingSubstitution.html" class="Module">Type.RenamingSubstitution</a> <a id="464" class="Keyword">using</a> <a id="470" class="Symbol">(</a><a id="471" href="Type.RenamingSubstitution.html#1608" class="Function">Ren</a><a id="474" class="Symbol">)</a>
<a id="476" class="Keyword">import</a> <a id="483" href="Builtin.Constant.Type.html" class="Module">Builtin.Constant.Type</a> <a id="505" class="Symbol">as</a> <a id="508" class="Module">Syn</a>
<a id="512" class="Keyword">import</a> <a id="519" href="Builtin.Constant.Type.html" class="Module">Builtin.Constant.Type</a> <a id="541" class="Symbol">as</a> <a id="544" class="Module">Nf</a>
</pre>
Values are defined by induction on kind. At kind # and * they are
inert and defined to be just normal forms. At function kind they are
either neutral or Kripke functions

<pre class="Agda"><a id="Val"></a><a id="727" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="731" class="Symbol">:</a> <a id="733" href="Type.html#515" class="Datatype">Ctx⋆</a> <a id="738" class="Symbol">→</a> <a id="740" href="Utils.html#6768" class="Datatype">Kind</a> <a id="745" class="Symbol">→</a> <a id="747" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="751" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="755" href="Type.BetaNBE.html#755" class="Bound">Φ</a> <a id="757" href="Utils.html#6787" class="InductiveConstructor">*</a>       <a id="765" class="Symbol">=</a> <a id="767" href="Type.BetaNBE.html#755" class="Bound">Φ</a> <a id="769" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="774" href="Utils.html#6787" class="InductiveConstructor">*</a>
<a id="776" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="780" href="Type.BetaNBE.html#780" class="Bound">Φ</a> <a id="782" href="Utils.html#6822" class="InductiveConstructor">♯</a>       <a id="790" class="Symbol">=</a> <a id="792" href="Type.BetaNBE.html#780" class="Bound">Φ</a> <a id="794" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="799" href="Utils.html#6822" class="InductiveConstructor">♯</a>
<a id="801" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="805" href="Type.BetaNBE.html#805" class="Bound">Φ</a> <a id="807" class="Symbol">(</a><a id="808" href="Type.BetaNBE.html#808" class="Bound">σ</a> <a id="810" href="Utils.html#6860" class="InductiveConstructor Operator">⇒</a> <a id="812" href="Type.BetaNBE.html#812" class="Bound">τ</a><a id="813" class="Symbol">)</a> <a id="815" class="Symbol">=</a> <a id="817" href="Type.BetaNBE.html#805" class="Bound">Φ</a> <a id="819" href="Type.BetaNormal.html#1071" class="Datatype Operator">⊢Ne⋆</a> <a id="824" class="Symbol">(</a><a id="825" href="Type.BetaNBE.html#808" class="Bound">σ</a> <a id="827" href="Utils.html#6860" class="InductiveConstructor Operator">⇒</a> <a id="829" href="Type.BetaNBE.html#812" class="Bound">τ</a><a id="830" class="Symbol">)</a> <a id="832" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="834" class="Symbol">∀</a> <a id="836" class="Symbol">{</a><a id="837" href="Type.BetaNBE.html#837" class="Bound">Ψ</a><a id="838" class="Symbol">}</a> <a id="840" class="Symbol">→</a> <a id="842" href="Type.RenamingSubstitution.html#1608" class="Function">Ren</a> <a id="846" href="Type.BetaNBE.html#805" class="Bound">Φ</a> <a id="848" href="Type.BetaNBE.html#837" class="Bound">Ψ</a> <a id="850" class="Symbol">→</a> <a id="852" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="856" href="Type.BetaNBE.html#837" class="Bound">Ψ</a> <a id="858" href="Type.BetaNBE.html#808" class="Bound">σ</a> <a id="860" class="Symbol">→</a> <a id="862" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="866" href="Type.BetaNBE.html#837" class="Bound">Ψ</a> <a id="868" href="Type.BetaNBE.html#812" class="Bound">τ</a>
</pre>
We can embed neutral terms into values at any kind using reflect.
reflect is quite simple in this version of NBE and not mutually
defined with reify.

<pre class="Agda"><a id="reflect"></a><a id="1030" href="Type.BetaNBE.html#1030" class="Function">reflect</a> <a id="1038" class="Symbol">:</a> <a id="1040" class="Symbol">∀{</a><a id="1042" href="Type.BetaNBE.html#1042" class="Bound">Φ</a> <a id="1044" href="Type.BetaNBE.html#1044" class="Bound">σ</a><a id="1045" class="Symbol">}</a> <a id="1047" class="Symbol">→</a> <a id="1049" href="Type.BetaNBE.html#1042" class="Bound">Φ</a> <a id="1051" href="Type.BetaNormal.html#1071" class="Datatype Operator">⊢Ne⋆</a> <a id="1056" href="Type.BetaNBE.html#1044" class="Bound">σ</a> <a id="1058" class="Symbol">→</a> <a id="1060" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="1064" href="Type.BetaNBE.html#1042" class="Bound">Φ</a> <a id="1066" href="Type.BetaNBE.html#1044" class="Bound">σ</a>
<a id="1068" href="Type.BetaNBE.html#1030" class="Function">reflect</a> <a id="1076" class="Symbol">{</a><a id="1077" class="Argument">σ</a> <a id="1079" class="Symbol">=</a> <a id="1081" href="Utils.html#6822" class="InductiveConstructor">♯</a><a id="1082" class="Symbol">}</a>     <a id="1088" href="Type.BetaNBE.html#1088" class="Bound">n</a> <a id="1090" class="Symbol">=</a> <a id="1092" href="Type.BetaNormal.html#1458" class="InductiveConstructor">ne</a> <a id="1095" href="Type.BetaNBE.html#1088" class="Bound">n</a>
<a id="1097" href="Type.BetaNBE.html#1030" class="Function">reflect</a> <a id="1105" class="Symbol">{</a><a id="1106" class="Argument">σ</a> <a id="1108" class="Symbol">=</a> <a id="1110" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="1111" class="Symbol">}</a>     <a id="1117" href="Type.BetaNBE.html#1117" class="Bound">n</a> <a id="1119" class="Symbol">=</a> <a id="1121" href="Type.BetaNormal.html#1458" class="InductiveConstructor">ne</a> <a id="1124" href="Type.BetaNBE.html#1117" class="Bound">n</a>
<a id="1126" href="Type.BetaNBE.html#1030" class="Function">reflect</a> <a id="1134" class="Symbol">{</a><a id="1135" class="Argument">σ</a> <a id="1137" class="Symbol">=</a> <a id="1139" href="Type.BetaNBE.html#1139" class="Bound">σ</a> <a id="1141" href="Utils.html#6860" class="InductiveConstructor Operator">⇒</a> <a id="1143" href="Type.BetaNBE.html#1143" class="Bound">τ</a><a id="1144" class="Symbol">}</a> <a id="1146" href="Type.BetaNBE.html#1146" class="Bound">n</a> <a id="1148" class="Symbol">=</a> <a id="1150" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="1155" href="Type.BetaNBE.html#1146" class="Bound">n</a>
</pre>
A shorthand for creating a new fresh variable as a value which we need
in reify

<pre class="Agda"><a id="fresh"></a><a id="1247" href="Type.BetaNBE.html#1247" class="Function">fresh</a> <a id="1253" class="Symbol">:</a> <a id="1255" class="Symbol">∀</a> <a id="1257" class="Symbol">{</a><a id="1258" href="Type.BetaNBE.html#1258" class="Bound">Φ</a> <a id="1260" href="Type.BetaNBE.html#1260" class="Bound">σ</a><a id="1261" class="Symbol">}</a> <a id="1263" class="Symbol">→</a> <a id="1265" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="1269" class="Symbol">(</a><a id="1270" href="Type.BetaNBE.html#1258" class="Bound">Φ</a> <a id="1272" href="Type.html#545" class="InductiveConstructor Operator">,⋆</a> <a id="1275" href="Type.BetaNBE.html#1260" class="Bound">σ</a><a id="1276" class="Symbol">)</a> <a id="1278" href="Type.BetaNBE.html#1260" class="Bound">σ</a>
<a id="1280" href="Type.BetaNBE.html#1247" class="Function">fresh</a> <a id="1286" class="Symbol">=</a> <a id="1288" href="Type.BetaNBE.html#1030" class="Function">reflect</a> <a id="1296" class="Symbol">(</a><a id="1297" href="Type.BetaNormal.html#1106" class="InductiveConstructor">`</a> <a id="1299" href="Type.html#921" class="InductiveConstructor">Z</a><a id="1300" class="Symbol">)</a>
</pre>
Renaming for values

<pre class="Agda"><a id="renVal"></a><a id="1332" href="Type.BetaNBE.html#1332" class="Function">renVal</a> <a id="1339" class="Symbol">:</a> <a id="1341" class="Symbol">∀</a> <a id="1343" class="Symbol">{</a><a id="1344" href="Type.BetaNBE.html#1344" class="Bound">σ</a> <a id="1346" href="Type.BetaNBE.html#1346" class="Bound">Φ</a> <a id="1348" href="Type.BetaNBE.html#1348" class="Bound">Ψ</a><a id="1349" class="Symbol">}</a> <a id="1351" class="Symbol">→</a> <a id="1353" href="Type.RenamingSubstitution.html#1608" class="Function">Ren</a> <a id="1357" href="Type.BetaNBE.html#1346" class="Bound">Φ</a> <a id="1359" href="Type.BetaNBE.html#1348" class="Bound">Ψ</a> <a id="1361" class="Symbol">→</a> <a id="1363" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="1367" href="Type.BetaNBE.html#1346" class="Bound">Φ</a> <a id="1369" href="Type.BetaNBE.html#1344" class="Bound">σ</a> <a id="1371" class="Symbol">→</a> <a id="1373" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="1377" href="Type.BetaNBE.html#1348" class="Bound">Ψ</a> <a id="1379" href="Type.BetaNBE.html#1344" class="Bound">σ</a>
<a id="1381" href="Type.BetaNBE.html#1332" class="Function">renVal</a> <a id="1388" class="Symbol">{</a><a id="1389" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="1390" class="Symbol">}</a>     <a id="1396" href="Type.BetaNBE.html#1396" class="Bound">ψ</a> <a id="1398" href="Type.BetaNBE.html#1398" class="Bound">n</a>        <a id="1407" class="Symbol">=</a> <a id="1409" href="Type.BetaNormal.html#2049" class="Function">renNf</a> <a id="1415" href="Type.BetaNBE.html#1396" class="Bound">ψ</a> <a id="1417" href="Type.BetaNBE.html#1398" class="Bound">n</a>
<a id="1419" href="Type.BetaNBE.html#1332" class="Function">renVal</a> <a id="1426" class="Symbol">{</a><a id="1427" href="Utils.html#6822" class="InductiveConstructor">♯</a><a id="1428" class="Symbol">}</a>     <a id="1434" href="Type.BetaNBE.html#1434" class="Bound">ψ</a> <a id="1436" href="Type.BetaNBE.html#1436" class="Bound">n</a>        <a id="1445" class="Symbol">=</a> <a id="1447" href="Type.BetaNormal.html#2049" class="Function">renNf</a> <a id="1453" href="Type.BetaNBE.html#1434" class="Bound">ψ</a> <a id="1455" href="Type.BetaNBE.html#1436" class="Bound">n</a>
<a id="1457" href="Type.BetaNBE.html#1332" class="Function">renVal</a> <a id="1464" class="Symbol">{</a><a id="1465" href="Type.BetaNBE.html#1465" class="Bound">σ</a> <a id="1467" href="Utils.html#6860" class="InductiveConstructor Operator">⇒</a> <a id="1469" href="Type.BetaNBE.html#1469" class="Bound">τ</a><a id="1470" class="Symbol">}</a> <a id="1472" href="Type.BetaNBE.html#1472" class="Bound">ψ</a> <a id="1474" class="Symbol">(</a><a id="1475" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="1480" href="Type.BetaNBE.html#1480" class="Bound">n</a><a id="1481" class="Symbol">)</a> <a id="1483" class="Symbol">=</a> <a id="1485" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="1490" class="Symbol">(</a><a id="1491" href="Type.BetaNormal.html#2101" class="Function">renNe</a> <a id="1497" href="Type.BetaNBE.html#1472" class="Bound">ψ</a> <a id="1499" href="Type.BetaNBE.html#1480" class="Bound">n</a><a id="1500" class="Symbol">)</a>
<a id="1502" href="Type.BetaNBE.html#1332" class="Function">renVal</a> <a id="1509" class="Symbol">{</a><a id="1510" href="Type.BetaNBE.html#1510" class="Bound">σ</a> <a id="1512" href="Utils.html#6860" class="InductiveConstructor Operator">⇒</a> <a id="1514" href="Type.BetaNBE.html#1514" class="Bound">τ</a><a id="1515" class="Symbol">}</a> <a id="1517" href="Type.BetaNBE.html#1517" class="Bound">ψ</a> <a id="1519" class="Symbol">(</a><a id="1520" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="1525" href="Type.BetaNBE.html#1525" class="Bound">f</a><a id="1526" class="Symbol">)</a> <a id="1528" class="Symbol">=</a> <a id="1530" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="1535" class="Symbol">λ</a> <a id="1537" href="Type.BetaNBE.html#1537" class="Bound">ρ&#39;</a> <a id="1540" class="Symbol">→</a>  <a id="1543" href="Type.BetaNBE.html#1525" class="Bound">f</a> <a id="1545" class="Symbol">(</a><a id="1546" href="Type.BetaNBE.html#1537" class="Bound">ρ&#39;</a> <a id="1549" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1551" href="Type.BetaNBE.html#1517" class="Bound">ψ</a><a id="1552" class="Symbol">)</a>
</pre>
Weakening for values

<pre class="Agda"><a id="weakenVal"></a><a id="1585" href="Type.BetaNBE.html#1585" class="Function">weakenVal</a> <a id="1595" class="Symbol">:</a> <a id="1597" class="Symbol">∀</a> <a id="1599" class="Symbol">{</a><a id="1600" href="Type.BetaNBE.html#1600" class="Bound">σ</a> <a id="1602" href="Type.BetaNBE.html#1602" class="Bound">Φ</a> <a id="1604" href="Type.BetaNBE.html#1604" class="Bound">K</a><a id="1605" class="Symbol">}</a> <a id="1607" class="Symbol">→</a> <a id="1609" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="1613" href="Type.BetaNBE.html#1602" class="Bound">Φ</a> <a id="1615" href="Type.BetaNBE.html#1600" class="Bound">σ</a> <a id="1617" class="Symbol">→</a> <a id="1619" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="1623" class="Symbol">(</a><a id="1624" href="Type.BetaNBE.html#1602" class="Bound">Φ</a> <a id="1626" href="Type.html#545" class="InductiveConstructor Operator">,⋆</a> <a id="1629" href="Type.BetaNBE.html#1604" class="Bound">K</a><a id="1630" class="Symbol">)</a> <a id="1632" href="Type.BetaNBE.html#1600" class="Bound">σ</a>
<a id="1634" href="Type.BetaNBE.html#1585" class="Function">weakenVal</a> <a id="1644" class="Symbol">=</a> <a id="1646" href="Type.BetaNBE.html#1332" class="Function">renVal</a> <a id="1653" href="Type.html#960" class="InductiveConstructor">S</a>
</pre>
Reify takes a value and yields a normal form.

<pre class="Agda"><a id="reify"></a><a id="1711" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="1717" class="Symbol">:</a> <a id="1719" class="Symbol">∀</a> <a id="1721" class="Symbol">{</a><a id="1722" href="Type.BetaNBE.html#1722" class="Bound">σ</a> <a id="1724" href="Type.BetaNBE.html#1724" class="Bound">Φ</a><a id="1725" class="Symbol">}</a> <a id="1727" class="Symbol">→</a> <a id="1729" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="1733" href="Type.BetaNBE.html#1724" class="Bound">Φ</a> <a id="1735" href="Type.BetaNBE.html#1722" class="Bound">σ</a> <a id="1737" class="Symbol">→</a> <a id="1739" href="Type.BetaNBE.html#1724" class="Bound">Φ</a> <a id="1741" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="1746" href="Type.BetaNBE.html#1722" class="Bound">σ</a>
<a id="1748" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="1754" class="Symbol">{</a><a id="1755" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="1756" class="Symbol">}</a>     <a id="1762" href="Type.BetaNBE.html#1762" class="Bound">n</a>         <a id="1772" class="Symbol">=</a> <a id="1774" href="Type.BetaNBE.html#1762" class="Bound">n</a>
<a id="1776" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="1782" class="Symbol">{</a><a id="1783" href="Utils.html#6822" class="InductiveConstructor">♯</a><a id="1784" class="Symbol">}</a>     <a id="1790" href="Type.BetaNBE.html#1790" class="Bound">n</a>         <a id="1800" class="Symbol">=</a> <a id="1802" href="Type.BetaNBE.html#1790" class="Bound">n</a>
<a id="1804" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="1810" class="Symbol">{</a><a id="1811" href="Type.BetaNBE.html#1811" class="Bound">σ</a> <a id="1813" href="Utils.html#6860" class="InductiveConstructor Operator">⇒</a> <a id="1815" href="Type.BetaNBE.html#1815" class="Bound">τ</a><a id="1816" class="Symbol">}</a> <a id="1818" class="Symbol">(</a><a id="1819" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="1824" href="Type.BetaNBE.html#1824" class="Bound">n</a><a id="1825" class="Symbol">)</a>  <a id="1828" class="Symbol">=</a> <a id="1830" href="Type.BetaNormal.html#1458" class="InductiveConstructor">ne</a> <a id="1833" href="Type.BetaNBE.html#1824" class="Bound">n</a>
<a id="1835" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="1841" class="Symbol">{</a><a id="1842" href="Type.BetaNBE.html#1842" class="Bound">σ</a> <a id="1844" href="Utils.html#6860" class="InductiveConstructor Operator">⇒</a> <a id="1846" href="Type.BetaNBE.html#1846" class="Bound">τ</a><a id="1847" class="Symbol">}</a> <a id="1849" class="Symbol">(</a><a id="1850" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="1855" href="Type.BetaNBE.html#1855" class="Bound">f</a><a id="1856" class="Symbol">)</a>  <a id="1859" class="Symbol">=</a> <a id="1861" href="Type.BetaNormal.html#1398" class="InductiveConstructor">ƛ</a> <a id="1863" class="Symbol">(</a><a id="1864" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="1870" class="Symbol">(</a><a id="1871" href="Type.BetaNBE.html#1855" class="Bound">f</a> <a id="1873" href="Type.html#960" class="InductiveConstructor">S</a> <a id="1875" href="Type.BetaNBE.html#1247" class="Function">fresh</a><a id="1880" class="Symbol">))</a> <a id="1883" class="Comment">-- has a name been lost here?</a>
</pre>
An environment is a mapping from variables to values

<pre class="Agda"><a id="Env"></a><a id="1976" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="1980" class="Symbol">:</a> <a id="1982" href="Type.html#515" class="Datatype">Ctx⋆</a> <a id="1987" class="Symbol">→</a> <a id="1989" href="Type.html#515" class="Datatype">Ctx⋆</a> <a id="1994" class="Symbol">→</a> <a id="1996" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="2000" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="2004" href="Type.BetaNBE.html#2004" class="Bound">Ψ</a> <a id="2006" href="Type.BetaNBE.html#2006" class="Bound">Φ</a> <a id="2008" class="Symbol">=</a> <a id="2010" class="Symbol">∀{</a><a id="2012" href="Type.BetaNBE.html#2012" class="Bound">J</a><a id="2013" class="Symbol">}</a> <a id="2015" class="Symbol">→</a> <a id="2017" href="Type.BetaNBE.html#2004" class="Bound">Ψ</a> <a id="2019" href="Type.html#887" class="Datatype Operator">∋⋆</a> <a id="2022" href="Type.BetaNBE.html#2012" class="Bound">J</a> <a id="2024" class="Symbol">→</a> <a id="2026" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="2030" href="Type.BetaNBE.html#2006" class="Bound">Φ</a> <a id="2032" href="Type.BetaNBE.html#2012" class="Bound">J</a>
</pre>
'cons' for environments

<pre class="Agda"><a id="_,,⋆_"></a><a id="2068" href="Type.BetaNBE.html#2068" class="Function Operator">_,,⋆_</a> <a id="2074" class="Symbol">:</a> <a id="2076" class="Symbol">∀{</a><a id="2078" href="Type.BetaNBE.html#2078" class="Bound">Ψ</a> <a id="2080" href="Type.BetaNBE.html#2080" class="Bound">Φ</a><a id="2081" class="Symbol">}</a> <a id="2083" class="Symbol">→</a> <a id="2085" class="Symbol">(</a><a id="2086" href="Type.BetaNBE.html#2086" class="Bound">σ</a> <a id="2088" class="Symbol">:</a> <a id="2090" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="2094" href="Type.BetaNBE.html#2080" class="Bound">Φ</a> <a id="2096" href="Type.BetaNBE.html#2078" class="Bound">Ψ</a><a id="2097" class="Symbol">)</a> <a id="2099" class="Symbol">→</a> <a id="2101" class="Symbol">∀{</a><a id="2103" href="Type.BetaNBE.html#2103" class="Bound">K</a><a id="2104" class="Symbol">}(</a><a id="2106" href="Type.BetaNBE.html#2106" class="Bound">A</a> <a id="2108" class="Symbol">:</a> <a id="2110" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="2114" href="Type.BetaNBE.html#2078" class="Bound">Ψ</a> <a id="2116" href="Type.BetaNBE.html#2103" class="Bound">K</a><a id="2117" class="Symbol">)</a> <a id="2119" class="Symbol">→</a> <a id="2121" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="2125" class="Symbol">(</a><a id="2126" href="Type.BetaNBE.html#2080" class="Bound">Φ</a> <a id="2128" href="Type.html#545" class="InductiveConstructor Operator">,⋆</a> <a id="2131" href="Type.BetaNBE.html#2103" class="Bound">K</a><a id="2132" class="Symbol">)</a> <a id="2134" href="Type.BetaNBE.html#2078" class="Bound">Ψ</a>
<a id="2136" class="Symbol">(</a><a id="2137" href="Type.BetaNBE.html#2137" class="Bound">σ</a> <a id="2139" href="Type.BetaNBE.html#2068" class="Function Operator">,,⋆</a> <a id="2143" href="Type.BetaNBE.html#2143" class="Bound">A</a><a id="2144" class="Symbol">)</a> <a id="2146" href="Type.html#921" class="InductiveConstructor">Z</a>     <a id="2152" class="Symbol">=</a> <a id="2154" href="Type.BetaNBE.html#2143" class="Bound">A</a>
<a id="2156" class="Symbol">(</a><a id="2157" href="Type.BetaNBE.html#2157" class="Bound">σ</a> <a id="2159" href="Type.BetaNBE.html#2068" class="Function Operator">,,⋆</a> <a id="2163" href="Type.BetaNBE.html#2163" class="Bound">A</a><a id="2164" class="Symbol">)</a> <a id="2166" class="Symbol">(</a><a id="2167" href="Type.html#960" class="InductiveConstructor">S</a> <a id="2169" href="Type.BetaNBE.html#2169" class="Bound">α</a><a id="2170" class="Symbol">)</a> <a id="2172" class="Symbol">=</a> <a id="2174" href="Type.BetaNBE.html#2157" class="Bound">σ</a> <a id="2176" href="Type.BetaNBE.html#2169" class="Bound">α</a>
</pre>
<pre class="Agda"><a id="exte"></a><a id="2187" href="Type.BetaNBE.html#2187" class="Function">exte</a> <a id="2192" class="Symbol">:</a> <a id="2194" class="Symbol">∀</a> <a id="2196" class="Symbol">{</a><a id="2197" href="Type.BetaNBE.html#2197" class="Bound">Φ</a> <a id="2199" href="Type.BetaNBE.html#2199" class="Bound">Ψ</a><a id="2200" class="Symbol">}</a> <a id="2202" class="Symbol">→</a> <a id="2204" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="2208" href="Type.BetaNBE.html#2197" class="Bound">Φ</a> <a id="2210" href="Type.BetaNBE.html#2199" class="Bound">Ψ</a> <a id="2212" class="Symbol">→</a> <a id="2214" class="Symbol">(∀</a> <a id="2217" class="Symbol">{</a><a id="2218" href="Type.BetaNBE.html#2218" class="Bound">K</a><a id="2219" class="Symbol">}</a> <a id="2221" class="Symbol">→</a> <a id="2223" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="2227" class="Symbol">(</a><a id="2228" href="Type.BetaNBE.html#2197" class="Bound">Φ</a> <a id="2230" href="Type.html#545" class="InductiveConstructor Operator">,⋆</a> <a id="2233" href="Type.BetaNBE.html#2218" class="Bound">K</a><a id="2234" class="Symbol">)</a> <a id="2236" class="Symbol">(</a><a id="2237" href="Type.BetaNBE.html#2199" class="Bound">Ψ</a> <a id="2239" href="Type.html#545" class="InductiveConstructor Operator">,⋆</a> <a id="2242" href="Type.BetaNBE.html#2218" class="Bound">K</a><a id="2243" class="Symbol">))</a>
<a id="2246" href="Type.BetaNBE.html#2187" class="Function">exte</a> <a id="2251" href="Type.BetaNBE.html#2251" class="Bound">η</a> <a id="2253" class="Symbol">=</a> <a id="2255" class="Symbol">(</a><a id="2256" href="Type.BetaNBE.html#1585" class="Function">weakenVal</a> <a id="2266" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2268" href="Type.BetaNBE.html#2251" class="Bound">η</a><a id="2269" class="Symbol">)</a> <a id="2271" href="Type.BetaNBE.html#2068" class="Function Operator">,,⋆</a> <a id="2275" href="Type.BetaNBE.html#1247" class="Function">fresh</a>
<a id="2281" class="Comment">{-
-- this version would be more analogous to ext and exts but would
-- require changing some proofs for terms
exte η Z      = fresh
exte η (S α)  = weakenVal (η α)
-}</a>
</pre>

Application for values. As values at function type can be semantic
functions or neutral terms we need this function to unpack them. If
the function is neutral we create a neutral application by reifying
the value and applying the neutral application constructor, then we
refect the neutral application into a value. If the function is a
semantic function we apply it to the identity renaming and then to
the argument. In this case, the function and argument are in the same
context so we do not need the Kripke extension, hence the identity
renaming.

<pre class="Agda"><a id="_·V_"></a><a id="3011" href="Type.BetaNBE.html#3011" class="Function Operator">_·V_</a> <a id="3016" class="Symbol">:</a> <a id="3018" class="Symbol">∀{</a><a id="3020" href="Type.BetaNBE.html#3020" class="Bound">Φ</a> <a id="3022" href="Type.BetaNBE.html#3022" class="Bound">K</a> <a id="3024" href="Type.BetaNBE.html#3024" class="Bound">J</a><a id="3025" class="Symbol">}</a> <a id="3027" class="Symbol">→</a> <a id="3029" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="3033" href="Type.BetaNBE.html#3020" class="Bound">Φ</a> <a id="3035" class="Symbol">(</a><a id="3036" href="Type.BetaNBE.html#3022" class="Bound">K</a> <a id="3038" class="InductiveConstructor Operator">⇒</a> <a id="3040" href="Type.BetaNBE.html#3024" class="Bound">J</a><a id="3041" class="Symbol">)</a> <a id="3043" class="Symbol">→</a> <a id="3045" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="3049" href="Type.BetaNBE.html#3020" class="Bound">Φ</a> <a id="3051" href="Type.BetaNBE.html#3022" class="Bound">K</a> <a id="3053" class="Symbol">→</a> <a id="3055" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="3059" href="Type.BetaNBE.html#3020" class="Bound">Φ</a> <a id="3061" href="Type.BetaNBE.html#3024" class="Bound">J</a>
<a id="3063" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="3068" href="Type.BetaNBE.html#3068" class="Bound">n</a> <a id="3070" href="Type.BetaNBE.html#3011" class="Function Operator">·V</a> <a id="3073" href="Type.BetaNBE.html#3073" class="Bound">v</a> <a id="3075" class="Symbol">=</a> <a id="3077" href="Type.BetaNBE.html#1030" class="Function">reflect</a> <a id="3085" class="Symbol">(</a><a id="3086" href="Type.BetaNBE.html#3068" class="Bound">n</a> <a id="3088" href="Type.BetaNormal.html#1150" class="InductiveConstructor Operator">·</a> <a id="3090" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="3096" href="Type.BetaNBE.html#3073" class="Bound">v</a><a id="3097" class="Symbol">)</a>
<a id="3099" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="3104" href="Type.BetaNBE.html#3104" class="Bound">f</a> <a id="3106" href="Type.BetaNBE.html#3011" class="Function Operator">·V</a> <a id="3109" href="Type.BetaNBE.html#3109" class="Bound">v</a> <a id="3111" class="Symbol">=</a> <a id="3113" href="Type.BetaNBE.html#3104" class="Bound">f</a> <a id="3115" href="Function.Base.html#624" class="Function">id</a> <a id="3118" href="Type.BetaNBE.html#3109" class="Bound">v</a>
</pre>
Evaluation a term in an environment yields a value. The most
interesting cases are ƛ where we introduce a new Kripke function that
will evaluate when it receives an argument and Π/μ where we need to go
under the binder and extend the environment before evaluating and
reifying.

<pre class="Agda"><a id="eval"></a><a id="3408" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3413" class="Symbol">:</a> <a id="3415" class="Symbol">∀{</a><a id="3417" href="Type.BetaNBE.html#3417" class="Bound">Φ</a> <a id="3419" href="Type.BetaNBE.html#3419" class="Bound">Ψ</a> <a id="3421" href="Type.BetaNBE.html#3421" class="Bound">K</a><a id="3422" class="Symbol">}</a> <a id="3424" class="Symbol">→</a> <a id="3426" href="Type.BetaNBE.html#3419" class="Bound">Ψ</a> <a id="3428" href="Type.html#1704" class="Datatype Operator">⊢⋆</a> <a id="3431" href="Type.BetaNBE.html#3421" class="Bound">K</a> <a id="3433" class="Symbol">→</a> <a id="3435" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="3439" href="Type.BetaNBE.html#3419" class="Bound">Ψ</a> <a id="3441" href="Type.BetaNBE.html#3417" class="Bound">Φ</a> <a id="3443" class="Symbol">→</a> <a id="3445" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="3449" href="Type.BetaNBE.html#3417" class="Bound">Φ</a> <a id="3451" href="Type.BetaNBE.html#3421" class="Bound">K</a>

<a id="eval-List"></a><a id="3454" href="Type.BetaNBE.html#3454" class="Function">eval-List</a> <a id="3464" class="Symbol">:</a> <a id="3466" class="Symbol">∀{</a><a id="3468" href="Type.BetaNBE.html#3468" class="Bound">Φ</a> <a id="3470" href="Type.BetaNBE.html#3470" class="Bound">Ψ</a> <a id="3472" href="Type.BetaNBE.html#3472" class="Bound">K</a><a id="3473" class="Symbol">}</a> <a id="3475" class="Symbol">→</a> <a id="3477" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3482" class="Symbol">(</a><a id="3483" href="Type.BetaNBE.html#3470" class="Bound">Ψ</a> <a id="3485" href="Type.html#1704" class="Datatype Operator">⊢⋆</a> <a id="3488" href="Type.BetaNBE.html#3472" class="Bound">K</a><a id="3489" class="Symbol">)</a> <a id="3491" class="Symbol">→</a> <a id="3493" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="3497" href="Type.BetaNBE.html#3470" class="Bound">Ψ</a> <a id="3499" href="Type.BetaNBE.html#3468" class="Bound">Φ</a> <a id="3501" class="Symbol">→</a> <a id="3503" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3508" class="Symbol">(</a><a id="3509" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="3513" href="Type.BetaNBE.html#3468" class="Bound">Φ</a> <a id="3515" href="Type.BetaNBE.html#3472" class="Bound">K</a><a id="3516" class="Symbol">)</a>
<a id="eval-VecList"></a><a id="3518" href="Type.BetaNBE.html#3518" class="Function">eval-VecList</a> <a id="3531" class="Symbol">:</a> <a id="3533" class="Symbol">∀{</a><a id="3535" href="Type.BetaNBE.html#3535" class="Bound">Φ</a> <a id="3537" href="Type.BetaNBE.html#3537" class="Bound">Ψ</a> <a id="3539" href="Type.BetaNBE.html#3539" class="Bound">K</a> <a id="3541" href="Type.BetaNBE.html#3541" class="Bound">n</a><a id="3542" class="Symbol">}</a> <a id="3544" class="Symbol">→</a> <a id="3546" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="3550" class="Symbol">(</a><a id="3551" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3556" class="Symbol">(</a><a id="3557" href="Type.BetaNBE.html#3537" class="Bound">Ψ</a> <a id="3559" href="Type.html#1704" class="Datatype Operator">⊢⋆</a> <a id="3562" href="Type.BetaNBE.html#3539" class="Bound">K</a><a id="3563" class="Symbol">))</a> <a id="3566" href="Type.BetaNBE.html#3541" class="Bound">n</a> <a id="3568" class="Symbol">→</a> <a id="3570" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="3574" href="Type.BetaNBE.html#3537" class="Bound">Ψ</a> <a id="3576" href="Type.BetaNBE.html#3535" class="Bound">Φ</a> <a id="3578" class="Symbol">→</a> <a id="3580" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="3584" class="Symbol">(</a><a id="3585" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3590" class="Symbol">(</a><a id="3591" href="Type.BetaNBE.html#727" class="Function">Val</a> <a id="3595" href="Type.BetaNBE.html#3535" class="Bound">Φ</a> <a id="3597" href="Type.BetaNBE.html#3539" class="Bound">K</a><a id="3598" class="Symbol">))</a> <a id="3601" href="Type.BetaNBE.html#3541" class="Bound">n</a>

<a id="3604" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3609" class="Symbol">(</a><a id="3610" href="Type.html#1797" class="InductiveConstructor">`</a> <a id="3612" href="Type.BetaNBE.html#3612" class="Bound">α</a><a id="3613" class="Symbol">)</a>     <a id="3619" href="Type.BetaNBE.html#3619" class="Bound">η</a> <a id="3621" class="Symbol">=</a> <a id="3623" href="Type.BetaNBE.html#3619" class="Bound">η</a> <a id="3625" href="Type.BetaNBE.html#3612" class="Bound">α</a>
<a id="3627" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3632" class="Symbol">(</a><a id="3633" href="Type.html#1839" class="InductiveConstructor">Π</a> <a id="3635" href="Type.BetaNBE.html#3635" class="Bound">B</a><a id="3636" class="Symbol">)</a>     <a id="3642" href="Type.BetaNBE.html#3642" class="Bound">η</a> <a id="3644" class="Symbol">=</a> <a id="3646" href="Type.BetaNormal.html#1277" class="InductiveConstructor">Π</a> <a id="3648" class="Symbol">(</a><a id="3649" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="3655" class="Symbol">(</a><a id="3656" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3661" href="Type.BetaNBE.html#3635" class="Bound">B</a> <a id="3663" class="Symbol">(</a><a id="3664" href="Type.BetaNBE.html#2187" class="Function">exte</a> <a id="3669" href="Type.BetaNBE.html#3642" class="Bound">η</a><a id="3670" class="Symbol">)))</a>
<a id="3674" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3679" class="Symbol">(</a><a id="3680" href="Type.BetaNBE.html#3680" class="Bound">A</a> <a id="3682" href="Type.html#1889" class="InductiveConstructor Operator">⇒</a> <a id="3684" href="Type.BetaNBE.html#3684" class="Bound">B</a><a id="3685" class="Symbol">)</a>   <a id="3689" href="Type.BetaNBE.html#3689" class="Bound">η</a> <a id="3691" class="Symbol">=</a> <a id="3693" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="3699" class="Symbol">(</a><a id="3700" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3705" href="Type.BetaNBE.html#3680" class="Bound">A</a> <a id="3707" href="Type.BetaNBE.html#3689" class="Bound">η</a><a id="3708" class="Symbol">)</a> <a id="3710" href="Type.BetaNormal.html#1331" class="InductiveConstructor Operator">⇒</a> <a id="3712" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="3718" class="Symbol">(</a><a id="3719" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3724" href="Type.BetaNBE.html#3684" class="Bound">B</a> <a id="3726" href="Type.BetaNBE.html#3689" class="Bound">η</a><a id="3727" class="Symbol">)</a>
<a id="3729" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3734" class="Symbol">(</a><a id="3735" href="Type.html#1950" class="InductiveConstructor">ƛ</a> <a id="3737" href="Type.BetaNBE.html#3737" class="Bound">B</a><a id="3738" class="Symbol">)</a>     <a id="3744" href="Type.BetaNBE.html#3744" class="Bound">η</a> <a id="3746" class="Symbol">=</a> <a id="3748" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="3753" class="Symbol">λ</a> <a id="3755" href="Type.BetaNBE.html#3755" class="Bound">ρ</a> <a id="3757" href="Type.BetaNBE.html#3757" class="Bound">v</a> <a id="3759" class="Symbol">→</a> <a id="3761" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3766" href="Type.BetaNBE.html#3737" class="Bound">B</a> <a id="3768" class="Symbol">((</a><a id="3770" href="Type.BetaNBE.html#1332" class="Function">renVal</a> <a id="3777" href="Type.BetaNBE.html#3755" class="Bound">ρ</a> <a id="3779" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3781" href="Type.BetaNBE.html#3744" class="Bound">η</a><a id="3782" class="Symbol">)</a> <a id="3784" href="Type.BetaNBE.html#2068" class="Function Operator">,,⋆</a> <a id="3788" href="Type.BetaNBE.html#3757" class="Bound">v</a><a id="3789" class="Symbol">)</a>
<a id="3791" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3796" class="Symbol">(</a><a id="3797" href="Type.BetaNBE.html#3797" class="Bound">A</a> <a id="3799" href="Type.html#2005" class="InductiveConstructor Operator">·</a> <a id="3801" href="Type.BetaNBE.html#3801" class="Bound">B</a><a id="3802" class="Symbol">)</a>   <a id="3806" href="Type.BetaNBE.html#3806" class="Bound">η</a> <a id="3808" class="Symbol">=</a> <a id="3810" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3815" href="Type.BetaNBE.html#3797" class="Bound">A</a> <a id="3817" href="Type.BetaNBE.html#3806" class="Bound">η</a> <a id="3819" href="Type.BetaNBE.html#3011" class="Function Operator">·V</a> <a id="3822" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3827" href="Type.BetaNBE.html#3801" class="Bound">B</a> <a id="3829" href="Type.BetaNBE.html#3806" class="Bound">η</a>
<a id="3831" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3836" class="Symbol">(</a><a id="3837" href="Type.html#2070" class="InductiveConstructor">μ</a> <a id="3839" href="Type.BetaNBE.html#3839" class="Bound">A</a> <a id="3841" href="Type.BetaNBE.html#3841" class="Bound">B</a><a id="3842" class="Symbol">)</a>   <a id="3846" href="Type.BetaNBE.html#3846" class="Bound">η</a> <a id="3848" class="Symbol">=</a> <a id="3850" href="Type.BetaNormal.html#1536" class="InductiveConstructor">μ</a> <a id="3852" class="Symbol">(</a><a id="3853" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="3859" class="Symbol">(</a><a id="3860" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3865" href="Type.BetaNBE.html#3839" class="Bound">A</a> <a id="3867" href="Type.BetaNBE.html#3846" class="Bound">η</a><a id="3868" class="Symbol">))</a> <a id="3871" class="Symbol">(</a><a id="3872" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="3878" class="Symbol">(</a><a id="3879" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3884" href="Type.BetaNBE.html#3841" class="Bound">B</a> <a id="3886" href="Type.BetaNBE.html#3846" class="Bound">η</a><a id="3887" class="Symbol">))</a>
<a id="3890" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3895" class="Symbol">(</a><a id="3896" href="Type.html#2152" class="InductiveConstructor">^</a> <a id="3898" href="Type.BetaNBE.html#3898" class="Bound">x</a><a id="3899" class="Symbol">)</a>     <a id="3905" href="Type.BetaNBE.html#3905" class="Bound">η</a> <a id="3907" class="Symbol">=</a> <a id="3909" href="Type.BetaNBE.html#1030" class="Function">reflect</a> <a id="3917" class="Symbol">(</a><a id="3918" href="Type.BetaNormal.html#1229" class="InductiveConstructor">^</a> <a id="3920" href="Type.BetaNBE.html#3898" class="Bound">x</a><a id="3921" class="Symbol">)</a>
<a id="3923" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3928" class="Symbol">(</a><a id="3929" href="Type.html#2194" class="InductiveConstructor">con</a> <a id="3933" href="Type.BetaNBE.html#3933" class="Bound">c</a><a id="3934" class="Symbol">)</a>   <a id="3938" href="Type.BetaNBE.html#3938" class="Bound">η</a> <a id="3940" class="Symbol">=</a> <a id="3942" href="Type.BetaNormal.html#1507" class="InductiveConstructor">con</a> <a id="3946" class="Symbol">(</a><a id="3947" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3952" href="Type.BetaNBE.html#3933" class="Bound">c</a> <a id="3954" href="Type.BetaNBE.html#3938" class="Bound">η</a><a id="3955" class="Symbol">)</a>
<a id="3957" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="3962" class="Symbol">(</a><a id="3963" href="Type.html#2264" class="InductiveConstructor">SOP</a> <a id="3967" href="Type.BetaNBE.html#3967" class="Bound">Tss</a><a id="3970" class="Symbol">)</a> <a id="3972" href="Type.BetaNBE.html#3972" class="Bound">η</a> <a id="3974" class="Symbol">=</a> <a id="3976" href="Type.BetaNormal.html#1626" class="InductiveConstructor">SOP</a> <a id="3980" class="Symbol">(</a><a id="3981" href="Type.BetaNBE.html#3518" class="Function">eval-VecList</a> <a id="3994" href="Type.BetaNBE.html#3967" class="Bound">Tss</a> <a id="3998" href="Type.BetaNBE.html#3972" class="Bound">η</a><a id="3999" class="Symbol">)</a>

<a id="4002" href="Type.BetaNBE.html#3454" class="Function">eval-List</a> <a id="4012" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="4015" href="Type.BetaNBE.html#4015" class="Bound">η</a> <a id="4017" class="Symbol">=</a> <a id="4019" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="4022" href="Type.BetaNBE.html#3454" class="Function">eval-List</a> <a id="4032" class="Symbol">(</a><a id="4033" href="Type.BetaNBE.html#4033" class="Bound">x</a> <a id="4035" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4037" href="Type.BetaNBE.html#4037" class="Bound">xs</a><a id="4039" class="Symbol">)</a> <a id="4041" href="Type.BetaNBE.html#4041" class="Bound">η</a> <a id="4043" class="Symbol">=</a> <a id="4045" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="4050" href="Type.BetaNBE.html#4033" class="Bound">x</a> <a id="4052" href="Type.BetaNBE.html#4041" class="Bound">η</a> <a id="4054" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4056" href="Type.BetaNBE.html#3454" class="Function">eval-List</a> <a id="4066" href="Type.BetaNBE.html#4037" class="Bound">xs</a> <a id="4069" href="Type.BetaNBE.html#4041" class="Bound">η</a>
<a id="4071" href="Type.BetaNBE.html#3518" class="Function">eval-VecList</a> <a id="4084" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a> <a id="4087" href="Type.BetaNBE.html#4087" class="Bound">η</a> <a id="4089" class="Symbol">=</a> <a id="4091" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
<a id="4094" href="Type.BetaNBE.html#3518" class="Function">eval-VecList</a> <a id="4107" class="Symbol">(</a><a id="4108" href="Type.BetaNBE.html#4108" class="Bound">Ts</a> <a id="4111" href="Data.Vec.Base.html#1062" class="InductiveConstructor Operator">∷</a> <a id="4113" href="Type.BetaNBE.html#4113" class="Bound">Tss</a><a id="4116" class="Symbol">)</a> <a id="4118" href="Type.BetaNBE.html#4118" class="Bound">η</a> <a id="4120" class="Symbol">=</a> <a id="4122" href="Type.BetaNBE.html#3454" class="Function">eval-List</a> <a id="4132" href="Type.BetaNBE.html#4108" class="Bound">Ts</a> <a id="4135" href="Type.BetaNBE.html#4118" class="Bound">η</a> <a id="4137" href="Data.Vec.Base.html#1062" class="InductiveConstructor Operator">∷</a> <a id="4139" href="Type.BetaNBE.html#3518" class="Function">eval-VecList</a> <a id="4152" href="Type.BetaNBE.html#4113" class="Bound">Tss</a> <a id="4156" href="Type.BetaNBE.html#4118" class="Bound">η</a>
</pre>
Identity environment

<pre class="Agda"><a id="idEnv"></a><a id="4189" href="Type.BetaNBE.html#4189" class="Function">idEnv</a> <a id="4195" class="Symbol">:</a> <a id="4197" class="Symbol">∀</a> <a id="4199" href="Type.BetaNBE.html#4199" class="Bound">Φ</a> <a id="4201" class="Symbol">→</a> <a id="4203" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="4207" href="Type.BetaNBE.html#4199" class="Bound">Φ</a> <a id="4209" href="Type.BetaNBE.html#4199" class="Bound">Φ</a>
<a id="4211" href="Type.BetaNBE.html#4189" class="Function">idEnv</a> <a id="4217" href="Type.BetaNBE.html#4217" class="Bound">Φ</a> <a id="4219" class="Symbol">=</a> <a id="4221" href="Type.BetaNBE.html#1030" class="Function">reflect</a> <a id="4229" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="4231" href="Type.BetaNormal.html#1106" class="InductiveConstructor">`</a>
</pre>
Normalisating a term yields a normal form. We evaluate in the identity
environment to yield a value in the same context as the original term
and then reify to yield a normal form

<pre class="Agda"><a id="nf"></a><a id="4422" href="Type.BetaNBE.html#4422" class="Function">nf</a> <a id="4425" class="Symbol">:</a> <a id="4427" class="Symbol">∀{</a><a id="4429" href="Type.BetaNBE.html#4429" class="Bound">Φ</a> <a id="4431" href="Type.BetaNBE.html#4431" class="Bound">K</a><a id="4432" class="Symbol">}</a> <a id="4434" class="Symbol">→</a> <a id="4436" href="Type.BetaNBE.html#4429" class="Bound">Φ</a> <a id="4438" href="Type.html#1704" class="Datatype Operator">⊢⋆</a> <a id="4441" href="Type.BetaNBE.html#4431" class="Bound">K</a> <a id="4443" class="Symbol">→</a> <a id="4445" href="Type.BetaNBE.html#4429" class="Bound">Φ</a> <a id="4447" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="4452" href="Type.BetaNBE.html#4431" class="Bound">K</a>
<a id="4454" href="Type.BetaNBE.html#4422" class="Function">nf</a> <a id="4457" href="Type.BetaNBE.html#4457" class="Bound">t</a> <a id="4459" class="Symbol">=</a> <a id="4461" href="Type.BetaNBE.html#1711" class="Function">reify</a> <a id="4467" class="Symbol">(</a><a id="4468" href="Type.BetaNBE.html#3408" class="Function">eval</a> <a id="4473" href="Type.BetaNBE.html#4457" class="Bound">t</a> <a id="4475" class="Symbol">(</a><a id="4476" href="Type.BetaNBE.html#4189" class="Function">idEnv</a> <a id="4482" class="Symbol">_))</a>

<a id="nf-VecList"></a><a id="4487" href="Type.BetaNBE.html#4487" class="Function">nf-VecList</a> <a id="4498" class="Symbol">:</a>  <a id="4501" class="Symbol">∀{</a><a id="4503" href="Type.BetaNBE.html#4503" class="Bound">Φ</a> <a id="4505" href="Type.BetaNBE.html#4505" class="Bound">K</a> <a id="4507" href="Type.BetaNBE.html#4507" class="Bound">n</a><a id="4508" class="Symbol">}</a> <a id="4510" class="Symbol">→</a> <a id="4512" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="4516" class="Symbol">(</a><a id="4517" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4522" class="Symbol">(</a><a id="4523" href="Type.BetaNBE.html#4503" class="Bound">Φ</a> <a id="4525" href="Type.html#1704" class="Datatype Operator">⊢⋆</a> <a id="4528" href="Type.BetaNBE.html#4505" class="Bound">K</a><a id="4529" class="Symbol">))</a> <a id="4532" href="Type.BetaNBE.html#4507" class="Bound">n</a> <a id="4534" class="Symbol">→</a> <a id="4536" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="4540" class="Symbol">(</a><a id="4541" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4546" class="Symbol">(</a><a id="4547" href="Type.BetaNBE.html#4503" class="Bound">Φ</a> <a id="4549" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="4554" href="Type.BetaNBE.html#4505" class="Bound">K</a><a id="4555" class="Symbol">))</a> <a id="4558" href="Type.BetaNBE.html#4507" class="Bound">n</a>
<a id="4560" href="Type.BetaNBE.html#4487" class="Function">nf-VecList</a> <a id="4571" href="Type.BetaNBE.html#4571" class="Bound">Tss</a> <a id="4575" class="Symbol">=</a>  <a id="4578" href="Type.BetaNBE.html#146" class="Function">vmap</a> <a id="4583" class="Symbol">(</a><a id="4584" href="Data.List.Base.html#1553" class="Function">map</a> <a id="4588" href="Type.BetaNBE.html#1711" class="Function">reify</a><a id="4593" class="Symbol">)</a> <a id="4595" class="Symbol">(</a><a id="4596" href="Type.BetaNBE.html#3518" class="Function">eval-VecList</a> <a id="4609" href="Type.BetaNBE.html#4571" class="Bound">Tss</a> <a id="4613" class="Symbol">(</a><a id="4614" href="Type.BetaNBE.html#4189" class="Function">idEnv</a> <a id="4620" class="Symbol">_))</a>
</pre>
Some properties relating uses of lookup on VecList-functions with List-functions

<pre class="Agda"><a id="4715" class="Keyword">module</a> <a id="4722" href="Type.BetaNBE.html#4722" class="Module">_</a> <a id="4724" class="Keyword">where</a>

  <a id="4733" class="Keyword">open</a> <a id="4738" class="Keyword">import</a> <a id="4745" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="4754" class="Keyword">using</a> <a id="4760" class="Symbol">(</a><a id="4761" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a><a id="4764" class="Symbol">;</a><a id="4765" href="Data.Fin.Base.html#1157" class="InductiveConstructor">zero</a><a id="4769" class="Symbol">;</a><a id="4770" href="Data.Fin.Base.html#1188" class="InductiveConstructor">suc</a><a id="4773" class="Symbol">)</a>
  <a id="4777" class="Keyword">open</a> <a id="4782" class="Keyword">import</a> <a id="4789" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="4798" class="Keyword">using</a> <a id="4804" class="Symbol">(</a><a id="4805" href="Data.Vec.Base.html#1614" class="Function">lookup</a><a id="4811" class="Symbol">)</a>
  <a id="4815" class="Keyword">open</a> <a id="4820" class="Keyword">import</a> <a id="4827" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="4865" class="Keyword">using</a> <a id="4871" class="Symbol">(</a><a id="4872" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="4875" class="Symbol">;</a><a id="4876" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="4880" class="Symbol">;</a> <a id="4882" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a><a id="4886" class="Symbol">;</a> <a id="4888" href="Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a><a id="4893" class="Symbol">)</a>

  
  <a id="4901" href="Type.BetaNBE.html#4901" class="Function">lookup-eval-VecList</a> <a id="4921" class="Symbol">:</a> <a id="4923" class="Symbol">∀</a> <a id="4925" class="Symbol">{</a><a id="4926" href="Type.BetaNBE.html#4926" class="Bound">Φ</a> <a id="4928" href="Type.BetaNBE.html#4928" class="Bound">Ψ</a> <a id="4930" href="Type.BetaNBE.html#4930" class="Bound">n</a><a id="4931" class="Symbol">}</a>
              <a id="4947" class="Symbol">→</a> <a id="4949" class="Symbol">(</a><a id="4950" href="Type.BetaNBE.html#4950" class="Bound">e</a> <a id="4952" class="Symbol">:</a> <a id="4954" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="4958" href="Type.BetaNBE.html#4930" class="Bound">n</a><a id="4959" class="Symbol">)</a>
              <a id="4975" class="Symbol">→</a> <a id="4977" class="Symbol">(</a><a id="4978" href="Type.BetaNBE.html#4978" class="Bound">Tss</a> <a id="4982" class="Symbol">:</a> <a id="4984" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="4988" class="Symbol">(</a><a id="4989" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4994" class="Symbol">(</a><a id="4995" href="Type.BetaNBE.html#4928" class="Bound">Ψ</a> <a id="4997" href="Type.html#1704" class="Datatype Operator">⊢⋆</a> <a id="5000" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="5001" class="Symbol">))</a> <a id="5004" href="Type.BetaNBE.html#4930" class="Bound">n</a><a id="5005" class="Symbol">)</a>
              <a id="5021" class="Symbol">→</a> <a id="5023" class="Symbol">(</a><a id="5024" href="Type.BetaNBE.html#5024" class="Bound">η</a> <a id="5026" class="Symbol">:</a> <a id="5028" href="Type.BetaNBE.html#1976" class="Function">Env</a> <a id="5032" href="Type.BetaNBE.html#4928" class="Bound">Ψ</a> <a id="5034" href="Type.BetaNBE.html#4926" class="Bound">Φ</a><a id="5035" class="Symbol">)</a>
                <a id="5053" class="Comment">--------------------------------------------</a>
              <a id="5112" class="Symbol">→</a> <a id="5114" href="Data.Vec.Base.html#1614" class="Function">lookup</a> <a id="5121" class="Symbol">(</a><a id="5122" href="Type.BetaNBE.html#3518" class="Function">eval-VecList</a> <a id="5135" href="Type.BetaNBE.html#4978" class="Bound">Tss</a> <a id="5139" href="Type.BetaNBE.html#5024" class="Bound">η</a><a id="5140" class="Symbol">)</a> <a id="5142" href="Type.BetaNBE.html#4950" class="Bound">e</a> <a id="5144" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5146" href="Type.BetaNBE.html#3454" class="Function">eval-List</a> <a id="5156" class="Symbol">(</a><a id="5157" href="Data.Vec.Base.html#1614" class="Function">lookup</a> <a id="5164" href="Type.BetaNBE.html#4978" class="Bound">Tss</a> <a id="5168" href="Type.BetaNBE.html#4950" class="Bound">e</a><a id="5169" class="Symbol">)</a> <a id="5171" href="Type.BetaNBE.html#5024" class="Bound">η</a>
  <a id="5175" href="Type.BetaNBE.html#4901" class="Function">lookup-eval-VecList</a> <a id="5195" href="Data.Fin.Base.html#1157" class="InductiveConstructor">zero</a> <a id="5200" class="Symbol">(_</a> <a id="5203" href="Data.Vec.Base.html#1062" class="InductiveConstructor Operator">∷</a> <a id="5205" class="Symbol">_)</a> <a id="5208" href="Type.BetaNBE.html#5208" class="Bound">η</a> <a id="5210" class="Symbol">=</a> <a id="5212" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="5219" href="Type.BetaNBE.html#4901" class="Function">lookup-eval-VecList</a> <a id="5239" class="Symbol">(</a><a id="5240" href="Data.Fin.Base.html#1188" class="InductiveConstructor">suc</a> <a id="5244" href="Type.BetaNBE.html#5244" class="Bound">e</a><a id="5245" class="Symbol">)</a> <a id="5247" class="Symbol">(_</a> <a id="5250" href="Data.Vec.Base.html#1062" class="InductiveConstructor Operator">∷</a> <a id="5252" href="Type.BetaNBE.html#5252" class="Bound">Tss</a><a id="5255" class="Symbol">)</a> <a id="5257" href="Type.BetaNBE.html#5257" class="Bound">η</a> <a id="5259" class="Symbol">=</a> <a id="5261" href="Type.BetaNBE.html#4901" class="Function">lookup-eval-VecList</a> <a id="5281" href="Type.BetaNBE.html#5244" class="Bound">e</a> <a id="5283" href="Type.BetaNBE.html#5252" class="Bound">Tss</a> <a id="5287" href="Type.BetaNBE.html#5257" class="Bound">η</a>
</pre>