<pre class="Agda"><a id="5" class="Keyword">module</a> <a id="12" href="Algorithmic.Evaluation.html" class="Module">Algorithmic.Evaluation</a> <a id="35" class="Keyword">where</a>
</pre>
## Imports

<pre class="Agda"><a id="62" class="Keyword">open</a> <a id="67" class="Keyword">import</a> <a id="74" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="83" class="Keyword">using</a> <a id="89" class="Symbol">(</a><a id="90" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="91" class="Symbol">;</a><a id="92" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="96" class="Symbol">;</a><a id="97" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="100" class="Symbol">)</a>
<a id="102" class="Keyword">open</a> <a id="107" class="Keyword">import</a> <a id="114" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="152" class="Keyword">using</a> <a id="158" class="Symbol">(</a><a id="159" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="163" class="Symbol">)</a>
<a id="165" class="Keyword">open</a> <a id="170" class="Keyword">import</a> <a id="177" href="Utils.html" class="Module">Utils</a> <a id="183" class="Keyword">using</a> <a id="189" class="Symbol">(</a><a id="190" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="191" class="Symbol">;</a><a id="192" href="Utils.html#1092" class="Datatype">Either</a><a id="198" class="Symbol">;</a><a id="199" href="Utils.html#1125" class="InductiveConstructor">inj₁</a><a id="203" class="Symbol">;</a><a id="204" href="Utils.html#4328" class="Datatype">RuntimeError</a><a id="216" class="Symbol">;</a><a id="217" href="Utils.html#2879" class="Field">return</a><a id="223" class="Symbol">)</a>
<a id="225" class="Keyword">open</a> <a id="230" href="Utils.html#4328" class="Module">RuntimeError</a>

<a id="244" class="Keyword">open</a> <a id="249" class="Keyword">import</a> <a id="256" href="Type.html" class="Module">Type</a> <a id="261" class="Keyword">using</a> <a id="267" class="Symbol">(</a><a id="268" href="Type.html#534" class="InductiveConstructor">∅</a><a id="269" class="Symbol">)</a>
<a id="271" class="Keyword">open</a> <a id="276" class="Keyword">import</a> <a id="283" href="Type.BetaNormal.html" class="Module">Type.BetaNormal</a> <a id="299" class="Keyword">using</a> <a id="305" class="Symbol">(</a><a id="306" href="Type.BetaNormal.html#1002" class="Datatype Operator">_⊢Nf⋆_</a><a id="312" class="Symbol">)</a>
<a id="314" class="Keyword">open</a> <a id="319" class="Keyword">import</a> <a id="326" href="Algorithmic.html" class="Module">Algorithmic</a> <a id="338" class="Keyword">using</a> <a id="344" class="Symbol">(</a><a id="345" href="Algorithmic.html#5258" class="Datatype Operator">_⊢_</a><a id="348" class="Symbol">;</a><a id="349" href="Algorithmic.html#1628" class="InductiveConstructor">∅</a><a id="350" class="Symbol">)</a>
<a id="352" class="Keyword">open</a> <a id="357" href="Algorithmic.html#5258" class="Module Operator">_⊢_</a>
<a id="361" class="Keyword">open</a> <a id="366" class="Keyword">import</a> <a id="373" href="Algorithmic.ReductionEC.html" class="Module">Algorithmic.ReductionEC</a> <a id="397" class="Keyword">using</a> <a id="403" class="Symbol">(</a><a id="404" href="Algorithmic.ReductionEC.html#2086" class="Datatype">Value</a><a id="409" class="Symbol">;</a><a id="410" href="Algorithmic.ReductionEC.html#5633" class="Datatype">Error</a><a id="415" class="Symbol">;</a><a id="416" href="Algorithmic.ReductionEC.html#10816" class="Datatype Operator">_—↠_</a><a id="420" class="Symbol">;</a><a id="421" href="Algorithmic.ReductionEC.html#10339" class="Datatype Operator">_—→_</a><a id="425" class="Symbol">;</a><a id="426" href="Algorithmic.ReductionEC.html#5713" class="InductiveConstructor">E-error</a><a id="433" class="Symbol">)</a>
<a id="435" class="Keyword">open</a> <a id="440" class="Keyword">import</a> <a id="447" href="Algorithmic.ReductionEC.Progress.html" class="Module">Algorithmic.ReductionEC.Progress</a> <a id="480" class="Keyword">using</a>  <a id="487" class="Symbol">(</a><a id="488" href="Algorithmic.ReductionEC.Progress.html#834" class="Datatype">Progress</a><a id="496" class="Symbol">;</a><a id="497" href="Algorithmic.ReductionEC.Progress.html#956" class="InductiveConstructor">done</a><a id="501" class="Symbol">;</a><a id="502" href="Algorithmic.ReductionEC.Progress.html#2015" class="Function">progress</a><a id="510" class="Symbol">;</a><a id="511" href="Algorithmic.ReductionEC.Progress.html#884" class="InductiveConstructor">step</a><a id="515" class="Symbol">)</a>
<a id="517" class="Keyword">open</a> <a id="522" href="Algorithmic.ReductionEC.html#10816" class="Module Operator">_—↠_</a>
</pre>
## Evaluation

As previously, gas is specified by a natural number.
<pre class="Agda"><a id="604" class="Keyword">data</a> <a id="Gas"></a><a id="609" href="Algorithmic.Evaluation.html#609" class="Datatype">Gas</a> <a id="613" class="Symbol">:</a> <a id="615" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="619" class="Keyword">where</a>
  <a id="Gas.gas"></a><a id="627" href="Algorithmic.Evaluation.html#627" class="InductiveConstructor">gas</a> <a id="631" class="Symbol">:</a> <a id="633" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="635" class="Symbol">→</a> <a id="637" href="Algorithmic.Evaluation.html#609" class="Datatype">Gas</a>
</pre>When our evaluator returns a term `N`, it will either give evidence that
`N` is a value or indicate that it ran out of gas.
<pre class="Agda"><a id="773" class="Keyword">data</a> <a id="Finished"></a><a id="778" href="Algorithmic.Evaluation.html#778" class="Datatype">Finished</a> <a id="787" class="Symbol">{</a><a id="788" href="Algorithmic.Evaluation.html#788" class="Bound">A</a> <a id="790" class="Symbol">:</a> <a id="792" href="Type.html#534" class="InductiveConstructor">∅</a> <a id="794" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="799" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="800" class="Symbol">}</a> <a id="802" class="Symbol">:</a>  <a id="805" class="Symbol">(</a><a id="806" href="Algorithmic.Evaluation.html#806" class="Bound">N</a> <a id="808" class="Symbol">:</a> <a id="810" href="Algorithmic.html#1628" class="InductiveConstructor">∅</a> <a id="812" href="Algorithmic.html#5258" class="Datatype Operator">⊢</a> <a id="814" href="Algorithmic.Evaluation.html#788" class="Bound">A</a><a id="815" class="Symbol">)</a> <a id="817" class="Symbol">→</a>  <a id="820" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="824" class="Keyword">where</a>

   <a id="Finished.done"></a><a id="834" href="Algorithmic.Evaluation.html#834" class="InductiveConstructor">done</a> <a id="839" class="Symbol">:</a> <a id="841" class="Symbol">∀</a> <a id="843" href="Algorithmic.Evaluation.html#843" class="Bound">N</a> <a id="845" class="Symbol">→</a> 
       <a id="855" href="Algorithmic.ReductionEC.html#2086" class="Datatype">Value</a> <a id="861" href="Algorithmic.Evaluation.html#843" class="Bound">N</a>
       <a id="870" class="Comment">----------</a>
     <a id="886" class="Symbol">→</a> <a id="888" href="Algorithmic.Evaluation.html#778" class="Datatype">Finished</a> <a id="897" href="Algorithmic.Evaluation.html#843" class="Bound">N</a>

   <a id="Finished.out-of-gas"></a><a id="903" href="Algorithmic.Evaluation.html#903" class="InductiveConstructor">out-of-gas</a> <a id="914" class="Symbol">:</a> <a id="916" class="Symbol">∀{</a><a id="918" href="Algorithmic.Evaluation.html#918" class="Bound">N</a><a id="919" class="Symbol">}</a> <a id="921" class="Symbol">→</a> 
       <a id="931" class="Comment">----------</a>
       <a id="949" href="Algorithmic.Evaluation.html#778" class="Datatype">Finished</a> <a id="958" href="Algorithmic.Evaluation.html#918" class="Bound">N</a>

   <a id="Finished.error"></a><a id="964" href="Algorithmic.Evaluation.html#964" class="InductiveConstructor">error</a> <a id="970" class="Symbol">:</a> <a id="972" class="Symbol">{</a><a id="973" href="Algorithmic.Evaluation.html#973" class="Bound">L</a> <a id="975" class="Symbol">:</a> <a id="977" href="Algorithmic.html#1628" class="InductiveConstructor">∅</a> <a id="979" href="Algorithmic.html#5258" class="Datatype Operator">⊢</a> <a id="981" href="Algorithmic.Evaluation.html#788" class="Bound">A</a><a id="982" class="Symbol">}</a> <a id="984" class="Symbol">→</a> <a id="986" href="Algorithmic.ReductionEC.html#5633" class="Datatype">Error</a> <a id="992" href="Algorithmic.Evaluation.html#973" class="Bound">L</a> <a id="994" class="Symbol">→</a> <a id="996" href="Algorithmic.Evaluation.html#778" class="Datatype">Finished</a> <a id="1005" href="Algorithmic.Evaluation.html#973" class="Bound">L</a>

   <a id="1011" class="Comment">-- is this actually possible?</a>
<a id="1041" class="Comment">--   neutral : {L : ∅ ⊢ A} → Neutral L → Finished L</a>
</pre>Given a term `L` of type `A`, the evaluator will, for some `N`, return
Ma reduction sequence from `L` to `N` and an indication of whether
reduction finished.
<pre class="Agda"><a id="1259" class="Keyword">data</a> <a id="Steps"></a><a id="1264" href="Algorithmic.Evaluation.html#1264" class="Datatype">Steps</a> <a id="1270" class="Symbol">:</a> <a id="1272" class="Symbol">∀</a> <a id="1274" class="Symbol">{</a><a id="1275" href="Algorithmic.Evaluation.html#1275" class="Bound">A</a> <a id="1277" class="Symbol">:</a> <a id="1279" href="Type.html#534" class="InductiveConstructor">∅</a> <a id="1281" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="1286" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="1287" class="Symbol">}</a> <a id="1289" class="Symbol">→</a> <a id="1291" href="Algorithmic.html#1628" class="InductiveConstructor">∅</a> <a id="1293" href="Algorithmic.html#5258" class="Datatype Operator">⊢</a> <a id="1295" href="Algorithmic.Evaluation.html#1275" class="Bound">A</a> <a id="1297" class="Symbol">→</a> <a id="1299" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1303" class="Keyword">where</a>

  <a id="Steps.steps"></a><a id="1312" href="Algorithmic.Evaluation.html#1312" class="InductiveConstructor">steps</a> <a id="1318" class="Symbol">:</a> <a id="1320" class="Symbol">{</a><a id="1321" href="Algorithmic.Evaluation.html#1321" class="Bound">A</a> <a id="1323" class="Symbol">:</a> <a id="1325" href="Type.html#534" class="InductiveConstructor">∅</a> <a id="1327" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="1332" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="1333" class="Symbol">}</a> <a id="1335" class="Symbol">{</a><a id="1336" href="Algorithmic.Evaluation.html#1336" class="Bound">L</a> <a id="1338" href="Algorithmic.Evaluation.html#1338" class="Bound">N</a> <a id="1340" class="Symbol">:</a> <a id="1342" href="Algorithmic.html#1628" class="InductiveConstructor">∅</a> <a id="1344" href="Algorithmic.html#5258" class="Datatype Operator">⊢</a> <a id="1346" href="Algorithmic.Evaluation.html#1321" class="Bound">A</a><a id="1347" class="Symbol">}</a>
    <a id="1353" class="Symbol">→</a> <a id="1355" href="Algorithmic.Evaluation.html#1336" class="Bound">L</a> <a id="1357" href="Algorithmic.ReductionEC.html#10816" class="Datatype Operator">—↠</a> <a id="1360" href="Algorithmic.Evaluation.html#1338" class="Bound">N</a>
    <a id="1366" class="Symbol">→</a> <a id="1368" href="Algorithmic.Evaluation.html#778" class="Datatype">Finished</a> <a id="1377" href="Algorithmic.Evaluation.html#1338" class="Bound">N</a>
      <a id="1385" class="Comment">----------</a>
    <a id="1400" class="Symbol">→</a> <a id="1402" href="Algorithmic.Evaluation.html#1264" class="Datatype">Steps</a> <a id="1408" href="Algorithmic.Evaluation.html#1336" class="Bound">L</a>


</pre>
<pre class="Agda"><a id="eval—→"></a><a id="1421" href="Algorithmic.Evaluation.html#1421" class="Function">eval—→</a>  <a id="1429" class="Symbol">:</a> <a id="1431" class="Symbol">∀{</a><a id="1433" href="Algorithmic.Evaluation.html#1433" class="Bound">A</a> <a id="1435" class="Symbol">:</a> <a id="1437" class="InductiveConstructor">∅</a> <a id="1439" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="1444" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="1445" class="Symbol">}</a> <a id="1447" class="Symbol">→</a> <a id="1449" class="Symbol">{</a><a id="1450" href="Algorithmic.Evaluation.html#1450" class="Bound">t</a> <a id="1452" href="Algorithmic.Evaluation.html#1452" class="Bound">t&#39;</a> <a id="1455" class="Symbol">:</a> <a id="1457" class="InductiveConstructor">∅</a> <a id="1459" href="Algorithmic.html#5258" class="Datatype Operator">⊢</a> <a id="1461" href="Algorithmic.Evaluation.html#1433" class="Bound">A</a><a id="1462" class="Symbol">}</a> <a id="1464" class="Symbol">→</a> <a id="1466" href="Algorithmic.Evaluation.html#1450" class="Bound">t</a> <a id="1468" href="Algorithmic.ReductionEC.html#10339" class="Datatype Operator">—→</a> <a id="1471" href="Algorithmic.Evaluation.html#1452" class="Bound">t&#39;</a> <a id="1474" class="Symbol">→</a>
  <a id="1478" href="Algorithmic.Evaluation.html#1264" class="Datatype">Steps</a> <a id="1484" href="Algorithmic.Evaluation.html#1452" class="Bound">t&#39;</a> <a id="1487" class="Symbol">→</a> <a id="1489" href="Algorithmic.Evaluation.html#1264" class="Datatype">Steps</a> <a id="1495" href="Algorithmic.Evaluation.html#1450" class="Bound">t</a>
<a id="1497" href="Algorithmic.Evaluation.html#1421" class="Function">eval—→</a> <a id="1504" href="Algorithmic.Evaluation.html#1504" class="Bound">p</a> <a id="1506" class="Symbol">(</a><a id="1507" href="Algorithmic.Evaluation.html#1312" class="InductiveConstructor">steps</a> <a id="1513" href="Algorithmic.Evaluation.html#1513" class="Bound">ps</a> <a id="1516" href="Algorithmic.Evaluation.html#1516" class="Bound">q</a><a id="1517" class="Symbol">)</a> <a id="1519" class="Symbol">=</a> <a id="1521" href="Algorithmic.Evaluation.html#1312" class="InductiveConstructor">steps</a> <a id="1527" class="Symbol">(</a><a id="1528" href="Algorithmic.ReductionEC.html#10927" class="InductiveConstructor">trans—↠</a> <a id="1536" href="Algorithmic.Evaluation.html#1504" class="Bound">p</a> <a id="1538" href="Algorithmic.Evaluation.html#1513" class="Bound">ps</a><a id="1540" class="Symbol">)</a> <a id="1542" href="Algorithmic.Evaluation.html#1516" class="Bound">q</a>
</pre>
The evaluator takes gas and a term and returns the corresponding steps.
<pre class="Agda"><a id="eval"></a><a id="1625" href="Algorithmic.Evaluation.html#1625" class="Function">eval</a> <a id="1630" class="Symbol">:</a> <a id="1632" class="Symbol">∀</a> <a id="1634" class="Symbol">{</a><a id="1635" href="Algorithmic.Evaluation.html#1635" class="Bound">A</a> <a id="1637" class="Symbol">:</a> <a id="1639" class="InductiveConstructor">∅</a> <a id="1641" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="1646" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="1647" class="Symbol">}</a> <a id="1649" class="Symbol">→</a> <a id="1651" href="Algorithmic.Evaluation.html#609" class="Datatype">Gas</a> <a id="1655" class="Symbol">→</a> <a id="1657" class="Symbol">(</a><a id="1658" href="Algorithmic.Evaluation.html#1658" class="Bound">M</a> <a id="1660" class="Symbol">:</a> <a id="1662" class="InductiveConstructor">∅</a> <a id="1664" href="Algorithmic.html#5258" class="Datatype Operator">⊢</a> <a id="1666" href="Algorithmic.Evaluation.html#1635" class="Bound">A</a><a id="1667" class="Symbol">)</a> <a id="1669" class="Symbol">→</a> <a id="1671" href="Algorithmic.Evaluation.html#1264" class="Datatype">Steps</a> <a id="1677" href="Algorithmic.Evaluation.html#1658" class="Bound">M</a>
<a id="evalProg"></a><a id="1679" href="Algorithmic.Evaluation.html#1679" class="Function">evalProg</a> <a id="1688" class="Symbol">:</a> <a id="1690" class="Symbol">∀{</a><a id="1692" href="Algorithmic.Evaluation.html#1692" class="Bound">A</a> <a id="1694" class="Symbol">:</a> <a id="1696" class="InductiveConstructor">∅</a> <a id="1698" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="1703" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="1704" class="Symbol">}</a> <a id="1706" class="Symbol">→</a> <a id="1708" href="Algorithmic.Evaluation.html#609" class="Datatype">Gas</a> <a id="1712" class="Symbol">→</a> <a id="1714" class="Symbol">{</a><a id="1715" href="Algorithmic.Evaluation.html#1715" class="Bound">t</a> <a id="1717" class="Symbol">:</a> <a id="1719" class="InductiveConstructor">∅</a> <a id="1721" href="Algorithmic.html#5258" class="Datatype Operator">⊢</a> <a id="1723" href="Algorithmic.Evaluation.html#1692" class="Bound">A</a><a id="1724" class="Symbol">}</a> <a id="1726" class="Symbol">→</a> <a id="1728" href="Algorithmic.ReductionEC.Progress.html#834" class="Datatype">Progress</a> <a id="1737" href="Algorithmic.Evaluation.html#1715" class="Bound">t</a> <a id="1739" class="Symbol">→</a> <a id="1741" href="Algorithmic.Evaluation.html#1264" class="Datatype">Steps</a> <a id="1747" href="Algorithmic.Evaluation.html#1715" class="Bound">t</a>

<a id="1750" href="Algorithmic.Evaluation.html#1625" class="Function">eval</a> <a id="1755" class="Symbol">(</a><a id="1756" href="Algorithmic.Evaluation.html#627" class="InductiveConstructor">gas</a> <a id="1760" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="1764" class="Symbol">)</a> <a id="1766" href="Algorithmic.Evaluation.html#1766" class="Bound">M</a> <a id="1768" class="Symbol">=</a> <a id="1770" href="Algorithmic.Evaluation.html#1312" class="InductiveConstructor">steps</a> <a id="1776" href="Algorithmic.ReductionEC.html#10871" class="InductiveConstructor">refl—↠</a> <a id="1783" href="Algorithmic.Evaluation.html#903" class="InductiveConstructor">out-of-gas</a>
<a id="1794" href="Algorithmic.Evaluation.html#1625" class="Function">eval</a> <a id="1799" class="Symbol">(</a><a id="1800" href="Algorithmic.Evaluation.html#627" class="InductiveConstructor">gas</a> <a id="1804" class="Symbol">(</a><a id="1805" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1809" href="Algorithmic.Evaluation.html#1809" class="Bound">n</a><a id="1810" class="Symbol">))</a> <a id="1813" href="Algorithmic.Evaluation.html#1813" class="Bound">M</a> <a id="1815" class="Symbol">=</a> <a id="1817" href="Algorithmic.Evaluation.html#1679" class="Function">evalProg</a> <a id="1826" class="Symbol">(</a><a id="1827" href="Algorithmic.Evaluation.html#627" class="InductiveConstructor">gas</a> <a id="1831" href="Algorithmic.Evaluation.html#1809" class="Bound">n</a><a id="1832" class="Symbol">)</a> <a id="1834" class="Symbol">(</a><a id="1835" href="Algorithmic.ReductionEC.Progress.html#2015" class="Function">progress</a> <a id="1844" href="Algorithmic.Evaluation.html#1813" class="Bound">M</a><a id="1845" class="Symbol">)</a>

<a id="1848" href="Algorithmic.Evaluation.html#1679" class="Function">evalProg</a> <a id="1857" href="Algorithmic.Evaluation.html#1857" class="Bound">g</a> <a id="1859" class="Symbol">(</a><a id="1860" href="Algorithmic.ReductionEC.Progress.html#884" class="InductiveConstructor">step</a> <a id="1865" class="Symbol">{</a><a id="1866" class="Argument">N</a> <a id="1868" class="Symbol">=</a> <a id="1870" class="DottedPattern Symbol">.(</a><a id="1872" href="Algorithmic.html#7612" class="DottedPattern InductiveConstructor">error</a> <a id="1878" class="DottedPattern Symbol">_)</a><a id="1880" class="Symbol">}</a> <a id="1882" class="Symbol">(</a><a id="1883" href="Algorithmic.ReductionEC.html#10585" class="InductiveConstructor">_—→_.ruleErr</a> <a id="1896" href="Algorithmic.ReductionEC.html#7346" class="InductiveConstructor">Algorithmic.ReductionEC.[]</a> <a id="1923" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="1927" class="Symbol">))</a> <a id="1930" class="Symbol">=</a> <a id="1932" href="Algorithmic.Evaluation.html#1312" class="InductiveConstructor">steps</a> <a id="1938" href="Algorithmic.ReductionEC.html#10871" class="InductiveConstructor">refl—↠</a> <a id="1945" class="Symbol">(</a><a id="1946" href="Algorithmic.Evaluation.html#964" class="InductiveConstructor">error</a> <a id="1952" href="Algorithmic.ReductionEC.html#5713" class="InductiveConstructor">E-error</a><a id="1959" class="Symbol">)</a>
<a id="1961" href="Algorithmic.Evaluation.html#1679" class="CatchallClause Function">evalProg</a><a id="1969" class="CatchallClause"> </a><a id="1970" href="Algorithmic.Evaluation.html#1970" class="CatchallClause Bound">g</a><a id="1971" class="CatchallClause"> </a><a id="1972" class="CatchallClause Symbol">(</a><a id="1973" href="Algorithmic.ReductionEC.Progress.html#884" class="CatchallClause InductiveConstructor">step</a><a id="1977" class="CatchallClause"> </a><a id="1978" class="CatchallClause Symbol">{</a><a id="1979" class="CatchallClause Argument">N</a><a id="1980" class="CatchallClause"> </a><a id="1981" class="CatchallClause Symbol">=</a><a id="1982" class="CatchallClause"> </a><a id="1983" href="Algorithmic.Evaluation.html#1983" class="CatchallClause Bound">t&#39;</a><a id="1985" class="CatchallClause Symbol">}</a><a id="1986" class="CatchallClause"> </a><a id="1987" href="Algorithmic.Evaluation.html#1987" class="CatchallClause Bound">p</a><a id="1988" class="CatchallClause Symbol">)</a>  <a id="1991" class="Symbol">=</a> <a id="1993" href="Algorithmic.Evaluation.html#1421" class="Function">eval—→</a> <a id="2000" href="Algorithmic.Evaluation.html#1987" class="Bound">p</a> <a id="2002" class="Symbol">(</a><a id="2003" href="Algorithmic.Evaluation.html#1625" class="Function">eval</a> <a id="2008" href="Algorithmic.Evaluation.html#1970" class="Bound">g</a> <a id="2010" href="Algorithmic.Evaluation.html#1983" class="Bound">t&#39;</a><a id="2012" class="Symbol">)</a>
<a id="2014" href="Algorithmic.Evaluation.html#1679" class="Function">evalProg</a> <a id="2023" href="Algorithmic.Evaluation.html#2023" class="Bound">g</a> <a id="2025" class="Symbol">(</a><a id="2026" href="Algorithmic.ReductionEC.Progress.html#956" class="InductiveConstructor">done</a> <a id="2031" href="Algorithmic.Evaluation.html#2031" class="Bound">VM</a><a id="2033" class="Symbol">)</a> <a id="2035" class="Symbol">=</a> <a id="2037" href="Algorithmic.Evaluation.html#1312" class="InductiveConstructor">steps</a> <a id="2043" href="Algorithmic.ReductionEC.html#10871" class="InductiveConstructor">refl—↠</a> <a id="2050" class="Symbol">(</a><a id="2051" href="Algorithmic.Evaluation.html#834" class="InductiveConstructor">done</a> <a id="2056" class="Symbol">_</a> <a id="2058" href="Algorithmic.Evaluation.html#2031" class="Bound">VM</a><a id="2060" class="Symbol">)</a>

<a id="stepper"></a><a id="2063" href="Algorithmic.Evaluation.html#2063" class="Function">stepper</a> <a id="2071" class="Symbol">:</a> <a id="2073" class="Symbol">{</a><a id="2074" href="Algorithmic.Evaluation.html#2074" class="Bound">A</a> <a id="2076" class="Symbol">:</a> <a id="2078" class="InductiveConstructor">∅</a> <a id="2080" href="Type.BetaNormal.html#1002" class="Datatype Operator">⊢Nf⋆</a> <a id="2085" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="2086" class="Symbol">}</a> <a id="2088" class="Symbol">→</a> <a id="2090" class="InductiveConstructor">∅</a> <a id="2092" href="Algorithmic.html#5258" class="Datatype Operator">⊢</a> <a id="2094" href="Algorithmic.Evaluation.html#2074" class="Bound">A</a> <a id="2096" class="Symbol">→</a> <a id="2098" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2100" class="Symbol">→</a> <a id="2102" href="Utils.html#1092" class="Datatype">Either</a> <a id="2109" href="Utils.html#4328" class="Datatype">RuntimeError</a> <a id="2122" class="Symbol">(</a><a id="2123" class="InductiveConstructor">∅</a> <a id="2125" href="Algorithmic.html#5258" class="Datatype Operator">⊢</a> <a id="2127" href="Algorithmic.Evaluation.html#2074" class="Bound">A</a><a id="2128" class="Symbol">)</a>
<a id="2130" href="Algorithmic.Evaluation.html#2063" class="Function">stepper</a> <a id="2138" class="Symbol">{</a><a id="2139" href="Algorithmic.Evaluation.html#2139" class="Bound">A</a><a id="2140" class="Symbol">}</a> <a id="2142" href="Algorithmic.Evaluation.html#2142" class="Bound">t</a> <a id="2144" href="Algorithmic.Evaluation.html#2144" class="Bound">n</a> <a id="2146" class="Keyword">with</a> <a id="2151" href="Algorithmic.Evaluation.html#1625" class="Function">eval</a> <a id="2156" class="Symbol">(</a><a id="2157" href="Algorithmic.Evaluation.html#627" class="InductiveConstructor">gas</a> <a id="2161" href="Algorithmic.Evaluation.html#2144" class="Bound">n</a><a id="2162" class="Symbol">)</a> <a id="2164" href="Algorithmic.Evaluation.html#2142" class="Bound">t</a>
<a id="2166" class="Symbol">...</a> <a id="2170" class="Symbol">|</a> <a id="2172" href="Algorithmic.Evaluation.html#1312" class="InductiveConstructor">steps</a> <a id="2178" href="Algorithmic.Evaluation.html#2178" class="Bound">x</a> <a id="2180" class="Symbol">(</a><a id="2181" href="Algorithmic.Evaluation.html#834" class="InductiveConstructor">done</a> <a id="2186" href="Algorithmic.Evaluation.html#2186" class="Bound">t&#39;</a> <a id="2189" href="Algorithmic.Evaluation.html#2189" class="Bound">v</a><a id="2190" class="Symbol">)</a> <a id="2192" class="Symbol">=</a> <a id="2194" href="Utils.html#2879" class="Field">return</a> <a id="2201" href="Algorithmic.Evaluation.html#2186" class="Bound">t&#39;</a>
<a id="2204" class="Symbol">...</a> <a id="2208" class="Symbol">|</a> <a id="2210" href="Algorithmic.Evaluation.html#1312" class="InductiveConstructor">steps</a> <a id="2216" href="Algorithmic.Evaluation.html#2216" class="Bound">x</a> <a id="2218" href="Algorithmic.Evaluation.html#903" class="InductiveConstructor">out-of-gas</a>  <a id="2230" class="Symbol">=</a> <a id="2232" href="Utils.html#1125" class="InductiveConstructor">inj₁</a> <a id="2237" href="Utils.html#4355" class="InductiveConstructor">gasError</a>
<a id="2246" class="Symbol">...</a> <a id="2250" class="Symbol">|</a> <a id="2252" href="Algorithmic.Evaluation.html#1312" class="InductiveConstructor">steps</a> <a id="2258" href="Algorithmic.Evaluation.html#2258" class="Bound">x</a> <a id="2260" class="Symbol">(</a><a id="2261" href="Algorithmic.Evaluation.html#964" class="InductiveConstructor">error</a> <a id="2267" class="Symbol">_)</a>   <a id="2272" class="Symbol">=</a> <a id="2274" href="Utils.html#2879" class="Field">return</a> <a id="2281" class="Symbol">(</a><a id="2282" href="Algorithmic.html#7612" class="InductiveConstructor">error</a> <a id="2288" class="Bound">A</a><a id="2289" class="Symbol">)</a>

</pre> 