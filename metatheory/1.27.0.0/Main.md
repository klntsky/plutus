<pre class="Agda"><a id="5" class="Keyword">module</a> <a id="12" href="Main.html" class="Module">Main</a> <a id="17" class="Keyword">where</a>

<a id="24" class="Keyword">open</a> <a id="29" class="Keyword">import</a> <a id="36" href="Agda.Builtin.IO.html" class="Module">Agda.Builtin.IO</a> <a id="52" class="Keyword">using</a> <a id="58" class="Symbol">(</a><a id="59" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a><a id="61" class="Symbol">)</a>
<a id="63" class="Keyword">import</a> <a id="70" href="IO.Primitive.html" class="Module">IO.Primitive</a> <a id="83" class="Symbol">as</a> <a id="86" class="Module">IO</a> <a id="89" class="Keyword">using</a> <a id="95" class="Symbol">(</a><a id="96" href="IO.Primitive.html#570" class="Postulate">return</a><a id="102" class="Symbol">;</a><a id="103" href="IO.Primitive.html#610" class="Postulate Operator">_&gt;&gt;=_</a><a id="108" class="Symbol">)</a>
<a id="110" class="Keyword">open</a> <a id="115" class="Keyword">import</a> <a id="122" href="Agda.Builtin.Unit.html" class="Module">Agda.Builtin.Unit</a> <a id="140" class="Keyword">using</a> <a id="146" class="Symbol">(</a><a id="147" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="148" class="Symbol">;</a><a id="149" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="151" class="Symbol">)</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Function.html" class="Module">Function</a> <a id="174" class="Keyword">using</a> <a id="180" class="Symbol">(</a><a id="181" href="Function.Base.html#1928" class="Function Operator">_$_</a><a id="184" class="Symbol">;</a><a id="185" href="Function.Base.html#1040" class="Function Operator">_∘_</a><a id="188" class="Symbol">)</a>
<a id="190" class="Keyword">open</a> <a id="195" class="Keyword">import</a> <a id="202" href="Data.String.html" class="Module">Data.String</a> <a id="214" class="Keyword">using</a> <a id="220" class="Symbol">(</a><a id="221" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="227" class="Symbol">;</a><a id="228" href="Data.String.Base.html#2375" class="Function Operator">_++_</a><a id="232" class="Symbol">)</a>
<a id="234" class="Keyword">open</a> <a id="239" class="Keyword">import</a> <a id="246" href="Agda.Builtin.Nat.html" class="Module">Agda.Builtin.Nat</a>
<a id="263" class="Keyword">open</a> <a id="268" class="Keyword">import</a> <a id="275" href="Agda.Builtin.Int.html" class="Module">Agda.Builtin.Int</a> <a id="292" class="Keyword">using</a> <a id="298" class="Symbol">(</a><a id="299" href="Agda.Builtin.Int.html#263" class="InductiveConstructor">pos</a><a id="302" class="Symbol">)</a>
<a id="304" class="Keyword">open</a> <a id="309" class="Keyword">import</a> <a id="316" href="Data.Integer.Show.html" class="Module">Data.Integer.Show</a> <a id="334" class="Keyword">using</a> <a id="340" class="Symbol">(</a><a id="341" href="Data.Integer.Show.html#615" class="Function">show</a><a id="345" class="Symbol">)</a>
<a id="347" class="Keyword">open</a> <a id="352" class="Keyword">import</a> <a id="359" href="Data.Product.html" class="Module">Data.Product</a> <a id="372" class="Keyword">using</a> <a id="378" class="Symbol">(</a><a id="379" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="380" class="Symbol">)</a> <a id="382" class="Keyword">renaming</a> <a id="391" class="Symbol">(</a><a id="392" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="396" class="Symbol">to</a> <a id="399" class="InductiveConstructor Operator">_,,_</a><a id="403" class="Symbol">)</a>
<a id="405" class="Keyword">open</a> <a id="410" class="Keyword">import</a> <a id="417" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="427" class="Keyword">using</a> <a id="433" class="Symbol">(</a><a id="434" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="438" class="Symbol">)</a>
<a id="440" class="Keyword">open</a> <a id="445" class="Keyword">import</a> <a id="452" href="Data.List.html" class="Module">Data.List</a> <a id="462" class="Keyword">using</a> <a id="468" class="Symbol">(</a><a id="469" href="Agda.Builtin.List.html#147" class="Datatype">List</a><a id="473" class="Symbol">)</a>
<a id="475" class="Keyword">open</a> <a id="480" class="Keyword">import</a> <a id="487" href="Data.Empty.html" class="Module">Data.Empty</a> <a id="498" class="Keyword">using</a> <a id="504" class="Symbol">(</a><a id="505" href="Data.Empty.html#535" class="Datatype">⊥</a><a id="506" class="Symbol">)</a> 

<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Type.html" class="Module">Type</a> <a id="527" class="Keyword">using</a> <a id="533" class="Symbol">(</a><a id="534" href="Type.html#515" class="Datatype">Ctx⋆</a><a id="538" class="Symbol">;</a><a id="539" href="Type.html#534" class="InductiveConstructor">∅</a><a id="540" class="Symbol">;</a><a id="541" href="Type.html#545" class="InductiveConstructor Operator">_,⋆_</a><a id="545" class="Symbol">)</a>
<a id="547" class="Keyword">open</a> <a id="552" class="Keyword">import</a> <a id="559" href="Check.html" class="Module">Check</a> <a id="565" class="Keyword">using</a> <a id="571" class="Symbol">(</a><a id="572" href="Check.html#2113" class="Datatype">TypeError</a><a id="581" class="Symbol">;</a><a id="582" href="Check.html#17832" class="Function">inferType</a><a id="591" class="Symbol">;</a><a id="592" href="Check.html#8682" class="Function">inferKind</a><a id="601" class="Symbol">;</a><a id="602" href="Check.html#3290" class="Function">decKind</a><a id="609" class="Symbol">;</a><a id="610" href="Check.html#8606" class="Function">checkKind</a><a id="619" class="Symbol">;</a><a id="620" href="Check.html#17738" class="Function">checkType</a><a id="629" class="Symbol">)</a>
<a id="631" class="Keyword">open</a> <a id="636" href="Check.html#2113" class="Module">TypeError</a> <a id="646" class="Comment">-- Bring all TypeError constructors in scope.</a>

<a id="693" class="Keyword">open</a> <a id="698" class="Keyword">import</a> <a id="705" href="Scoped.Extrication.html" class="Module">Scoped.Extrication</a> <a id="724" class="Keyword">using</a> <a id="730" class="Symbol">(</a><a id="731" href="Scoped.Extrication.html#1270" class="Function">extricateNf⋆</a><a id="743" class="Symbol">;</a><a id="744" href="Scoped.Extrication.html#2985" class="Function">extricate</a><a id="753" class="Symbol">)</a>
<a id="755" class="Keyword">open</a> <a id="760" class="Keyword">import</a> <a id="767" href="Type.BetaNormal.html" class="Module">Type.BetaNormal</a> <a id="783" class="Keyword">using</a> <a id="789" class="Symbol">(</a><a id="790" href="Type.BetaNormal.html#1002" class="Datatype Operator">_⊢Nf⋆_</a><a id="796" class="Symbol">)</a>
<a id="798" class="Keyword">import</a> <a id="805" href="Untyped.html" class="Module">Untyped</a> <a id="813" class="Symbol">as</a> <a id="816" class="Module">U</a> <a id="818" class="Keyword">using</a> <a id="824" class="Symbol">(</a><a id="825" href="Untyped.html#1295" class="Datatype Operator">_⊢</a><a id="827" class="Symbol">;</a><a id="828" href="Untyped.html#5840" class="Function">scopeCheckU0</a><a id="840" class="Symbol">;</a><a id="841" href="Untyped.html#4512" class="Function">extricateU0</a><a id="852" class="Symbol">;</a><a id="853" href="Untyped.html#6023" class="Function">decUTm</a><a id="859" class="Symbol">)</a>
<a id="861" class="Keyword">import</a> <a id="868" href="Untyped.CEKWithCost.html" class="Module">Untyped.CEKWithCost</a> <a id="888" class="Symbol">as</a> <a id="891" class="Module">U</a> <a id="893" class="Keyword">using</a> <a id="899" class="Symbol">(</a><a id="900" href="Untyped.CEKWithCost.html#6578" class="Function">stepperC</a><a id="908" class="Symbol">)</a>
<a id="910" class="Keyword">open</a> <a id="915" class="Keyword">import</a> <a id="922" href="Cost.Base.html" class="Module">Cost.Base</a>
<a id="932" class="Keyword">open</a> <a id="937" class="Keyword">import</a> <a id="944" href="Cost.html" class="Module">Cost</a> <a id="949" class="Keyword">using</a> <a id="955" class="Symbol">(</a><a id="956" href="Cost.html#4619" class="Function">machineParameters</a><a id="973" class="Symbol">;</a><a id="974" href="Cost.html#6831" class="Function">tallyingMachineParameters</a><a id="999" class="Symbol">;</a><a id="1000" href="Cost.html#4834" class="Function">countingReport</a><a id="1014" class="Symbol">;</a><a id="1015" href="Cost.html#7084" class="Function">tallyingReport</a><a id="1029" class="Symbol">)</a>
<a id="1031" class="Keyword">open</a> <a id="1036" class="Keyword">import</a> <a id="1043" href="Cost.Raw.html" class="Module">Cost.Raw</a> <a id="1052" class="Keyword">using</a> <a id="1058" class="Symbol">(</a><a id="1059" href="Cost.Raw.html#4818" class="Function">RawCostModel</a><a id="1071" class="Symbol">)</a>
<a id="1073" class="Keyword">open</a> <a id="1078" class="Keyword">import</a> <a id="1085" href="Cost.Model.html" class="Module">Cost.Model</a> <a id="1096" class="Keyword">using</a> <a id="1102" class="Symbol">(</a><a id="1103" href="Cost.Model.html#8450" class="Function">createMap</a><a id="1112" class="Symbol">)</a>
<a id="1114" class="Keyword">import</a> <a id="1121" href="RawU.html" class="Module">RawU</a> <a id="1126" class="Symbol">as</a> <a id="1129" class="Module">U</a> <a id="1131" class="Keyword">using</a> <a id="1137" class="Symbol">(</a><a id="1138" href="RawU.html#6136" class="Datatype">Untyped</a><a id="1145" class="Symbol">)</a>

<a id="1148" class="Keyword">open</a> <a id="1153" class="Keyword">import</a> <a id="1160" href="Untyped.CEK.html" class="Module">Untyped.CEK</a> <a id="1172" class="Symbol">as</a> <a id="1175" class="Module">U</a> <a id="1177" class="Keyword">using</a> <a id="1183" class="Symbol">(</a><a id="1184" href="Untyped.CEK.html#21028" class="Function">stepper</a><a id="1191" class="Symbol">;</a><a id="1192" href="Untyped.CEK.html#1138" class="Datatype">Stack</a><a id="1197" class="Symbol">;</a><a id="1198" href="Untyped.CEK.html#1168" class="InductiveConstructor">ε</a><a id="1199" class="Symbol">;</a><a id="1200" href="Untyped.CEK.html#1241" class="Datatype">Env</a><a id="1203" class="Symbol">;</a><a id="1204" href="Untyped.CEK.html#1265" class="InductiveConstructor">[]</a><a id="1206" class="Symbol">;</a><a id="1207" href="Untyped.CEK.html#3507" class="Datatype">State</a><a id="1212" class="Symbol">)</a>
<a id="1214" class="Keyword">open</a> <a id="1219" href="Untyped.CEK.html#3507" class="Module">U.State</a>

<a id="1228" class="Keyword">open</a> <a id="1233" class="Keyword">import</a> <a id="1240" href="Raw.html" class="Module">Raw</a> <a id="1244" class="Keyword">using</a> <a id="1250" class="Symbol">(</a><a id="1251" href="Raw.html#1403" class="Datatype">RawTm</a><a id="1256" class="Symbol">;</a><a id="1257" href="Raw.html#778" class="Datatype">RawTy</a><a id="1262" class="Symbol">;</a><a id="1263" href="Raw.html#5704" class="Function">rawPrinter</a><a id="1273" class="Symbol">;</a><a id="1274" href="Raw.html#4675" class="Function">rawTyPrinter</a><a id="1286" class="Symbol">;</a><a id="1287" href="Raw.html#2608" class="Function">decRTy</a><a id="1293" class="Symbol">;</a><a id="1294" href="Raw.html#3421" class="Function">decRTm</a><a id="1300" class="Symbol">)</a>
<a id="1302" class="Keyword">open</a> <a id="1307" class="Keyword">import</a> <a id="1314" href="Scoped.html" class="Module">Scoped</a> <a id="1321" class="Keyword">using</a> <a id="1327" class="Symbol">(</a><a id="1328" href="Scoped.html#7696" class="Postulate">FreeVariableError</a><a id="1345" class="Symbol">;</a><a id="1346" href="Scoped.html#7791" class="Datatype">ScopeError</a><a id="1356" class="Symbol">;</a><a id="1357" href="Scoped.html#7840" class="InductiveConstructor">freeVariableError</a><a id="1374" class="Symbol">;</a><a id="1375" href="Scoped.html#10940" class="Function">extricateScopeTy</a><a id="1391" class="Symbol">;</a><a id="1392" href="Scoped.html#6863" class="Datatype">ScopedTm</a><a id="1400" class="Symbol">;</a><a id="1401" href="Scoped.html#1381" class="Datatype">Weirdℕ</a><a id="1407" class="Symbol">;</a><a id="1408" href="Scoped.html#9699" class="Function">scopeCheckTm</a><a id="1420" class="Symbol">;</a><a id="1421" href="Scoped.html#4326" class="Function">shifter</a><a id="1428" class="Symbol">;</a><a id="1429" href="Scoped.html#5985" class="Function">unshifter</a><a id="1438" class="Symbol">;</a><a id="1439" href="Scoped.html#11919" class="Function">extricateScope</a><a id="1453" class="Symbol">;</a><a id="1454" href="Scoped.html#5160" class="Function">unshifterTy</a><a id="1465" class="Symbol">;</a><a id="1466" href="Scoped.html#8523" class="Function">scopeCheckTy</a><a id="1478" class="Symbol">;</a><a id="1479" href="Scoped.html#3525" class="Function">shifterTy</a><a id="1488" class="Symbol">)</a>
<a id="1490" class="Keyword">open</a> <a id="1495" href="Scoped.html#1381" class="Module">Weirdℕ</a> <a id="1502" class="Comment">-- Bring Weirdℕ constructors in scope</a>
<a id="1540" class="Keyword">open</a> <a id="1545" class="Keyword">import</a> <a id="1552" href="Utils.html" class="Module">Utils</a> <a id="1558" class="Keyword">using</a> <a id="1564" class="Symbol">(</a><a id="1565" href="Utils.html#1092" class="Datatype">Either</a><a id="1571" class="Symbol">;</a><a id="1572" href="Utils.html#1125" class="InductiveConstructor">inj₁</a><a id="1576" class="Symbol">;</a><a id="1577" href="Utils.html#1149" class="InductiveConstructor">inj₂</a><a id="1581" class="Symbol">;</a><a id="1582" href="Utils.html#3666" class="Function">withE</a><a id="1587" class="Symbol">;</a><a id="1588" href="Utils.html#6768" class="Datatype">Kind</a><a id="1592" class="Symbol">;</a><a id="1593" href="Utils.html#6787" class="InductiveConstructor">*</a><a id="1594" class="Symbol">;</a><a id="1595" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a><a id="1600" class="Symbol">;</a><a id="1601" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1608" class="Symbol">;</a><a id="1609" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a><a id="1613" class="Symbol">;</a><a id="1614" href="Utils.html#2832" class="Record">Monad</a><a id="1619" class="Symbol">;</a><a id="1620" href="Utils.html#4328" class="Datatype">RuntimeError</a><a id="1632" class="Symbol">;</a><a id="1633" href="Utils.html#3781" class="Function">dec2Either</a><a id="1643" class="Symbol">;</a><a id="1644" href="Utils.html#3971" class="InductiveConstructor Operator">_,_</a><a id="1647" class="Symbol">)</a>
<a id="1649" class="Keyword">open</a> <a id="1654" href="Utils.html#4328" class="Module">RuntimeError</a>
<a id="1667" class="Keyword">open</a> <a id="1672" href="Utils.html#2832" class="Module">Monad</a> <a id="1678" class="Symbol">{{...}}</a>

<a id="1687" class="Keyword">open</a> <a id="1692" class="Keyword">import</a> <a id="1699" href="Algorithmic.html" class="Module">Algorithmic</a> <a id="1711" class="Keyword">using</a> <a id="1717" class="Symbol">(</a><a id="1718" href="Algorithmic.html#5258" class="Datatype Operator">_⊢_</a><a id="1721" class="Symbol">;</a><a id="1722" href="Algorithmic.html#1628" class="InductiveConstructor">∅</a><a id="1723" class="Symbol">;</a><a id="1724" href="Algorithmic.html#7612" class="InductiveConstructor">error</a><a id="1729" class="Symbol">)</a>

<a id="1732" class="Keyword">open</a> <a id="1737" class="Keyword">import</a> <a id="1744" href="Algorithmic.CK.html" class="Module">Algorithmic.CK</a> <a id="1759" class="Keyword">using</a> <a id="1765" class="Symbol">(</a><a id="1766" href="Algorithmic.CK.html#4578" class="Function">stepper</a><a id="1773" class="Symbol">;</a><a id="1774" href="Algorithmic.CK.html#1271" class="Datatype">State</a><a id="1779" class="Symbol">;</a><a id="1780" href="Algorithmic.CK.html#1084" class="Datatype">Stack</a><a id="1785" class="Symbol">;</a><a id="1786" href="Algorithmic.CK.html#1135" class="InductiveConstructor">ε</a><a id="1787" class="Symbol">)</a>
<a id="1789" class="Keyword">open</a> <a id="1794" href="Algorithmic.CK.html#1271" class="Module">Algorithmic.CK.State</a>

<a id="1816" class="Keyword">open</a> <a id="1821" class="Keyword">import</a> <a id="1828" href="Algorithmic.CEK.html" class="Module">Algorithmic.CEK</a> <a id="1844" class="Keyword">using</a> <a id="1850" class="Symbol">(</a><a id="1851" href="Algorithmic.CEK.html#18491" class="Function">stepper</a><a id="1858" class="Symbol">;</a><a id="1859" href="Algorithmic.CEK.html#16090" class="Datatype">State</a><a id="1864" class="Symbol">;</a><a id="1865" href="Algorithmic.CEK.html#15959" class="Datatype">Stack</a><a id="1870" class="Symbol">;</a><a id="1871" href="Algorithmic.CEK.html#16011" class="InductiveConstructor">ε</a><a id="1872" class="Symbol">;</a><a id="1873" href="Algorithmic.CEK.html#1802" class="Datatype">Env</a><a id="1876" class="Symbol">;</a><a id="1877" href="Algorithmic.CEK.html#3805" class="InductiveConstructor">[]</a><a id="1879" class="Symbol">)</a>
<a id="1881" class="Keyword">open</a> <a id="1886" href="Algorithmic.CEK.html#16090" class="Module">Algorithmic.CEK.State</a>

<a id="1909" class="Keyword">open</a> <a id="1914" class="Keyword">import</a> <a id="1921" href="Algorithmic.Erasure.html" class="Module">Algorithmic.Erasure</a> <a id="1941" class="Keyword">using</a> <a id="1947" class="Symbol">(</a><a id="1948" href="Algorithmic.Erasure.html#2188" class="Function">erase</a><a id="1953" class="Symbol">)</a>
<a id="1955" class="Keyword">import</a> <a id="1962" href="Algorithmic.Evaluation.html" class="Module">Algorithmic.Evaluation</a> <a id="1985" class="Symbol">as</a> <a id="1988" class="Module">L</a> <a id="1990" class="Keyword">using</a><a id="1995" class="Symbol">(</a><a id="1996" href="Algorithmic.Evaluation.html#2063" class="Function">stepper</a><a id="2003" class="Symbol">)</a>

<a id="2006" class="Keyword">open</a> <a id="2011" class="Keyword">import</a> <a id="2018" href="Evaluator.Base.html" class="Module">Evaluator.Base</a> <a id="2033" class="Keyword">using</a> <a id="2039" class="Symbol">(</a><a id="2040" href="Evaluator.Base.html#1210" class="Datatype">ERROR</a><a id="2045" class="Symbol">;</a><a id="2046" href="Evaluator.Base.html#2586" class="Function">reportError</a><a id="2057" class="Symbol">)</a>
<a id="2059" class="Keyword">open</a> <a id="2064" class="Keyword">import</a> <a id="2071" href="Evaluator.Program.html" class="Module">Evaluator.Program</a> <a id="2089" class="Keyword">using</a> <a id="2095" class="Symbol">(</a><a id="2096" href="Evaluator.Program.html#2109" class="Postulate">Input</a><a id="2101" class="Symbol">;</a><a id="2102" href="Evaluator.Program.html#2093" class="Postulate">Format</a><a id="2108" class="Symbol">;</a><a id="2109" href="Evaluator.Program.html#3920" class="Datatype">EvalMode</a><a id="2117" class="Symbol">;</a><a id="2118" href="Evaluator.Program.html#3713" class="Datatype">BudgetMode</a><a id="2128" class="Symbol">;</a><a id="2129" href="Evaluator.Program.html#2215" class="Postulate">ProgramN</a><a id="2137" class="Symbol">;</a><a id="2138" href="Evaluator.Program.html#2335" class="Postulate">ProgramNU</a><a id="2147" class="Symbol">;</a><a id="2148" href="Evaluator.Program.html#7436" class="Function">evalProgramNU</a><a id="2161" class="Symbol">;</a><a id="2162" href="Evaluator.Program.html#7588" class="Function">evalProgramN</a><a id="2174" class="Symbol">;</a><a id="2175" href="Evaluator.Program.html#8424" class="Function">typeCheckProgramN</a><a id="2192" class="Symbol">)</a>
<a id="2194" class="Keyword">open</a> <a id="2199" href="Evaluator.Program.html#3920" class="Module">EvalMode</a>
<a id="2208" class="Keyword">import</a> <a id="2215" href="Evaluator.Term.html" class="Module">Evaluator.Term</a> <a id="2230" class="Comment">-- Needed only to generate the compiled Haskell file</a>

<a id="2284" class="Comment">-- There&#39;s a long prelude here that could go in a different file but</a>
<a id="2353" class="Comment">-- currently it&#39;s only used here</a>

<a id="2387" class="Comment">-- Text Stuff</a>

<a id="2402" class="Keyword">postulate</a>
  <a id="putStrLn"></a><a id="2414" href="Main.html#2414" class="Postulate">putStrLn</a> <a id="2423" class="Symbol">:</a> <a id="2425" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="2432" class="Symbol">→</a> <a id="2434" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="2437" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="2440" class="Symbol">{-#</a> <a id="2444" class="Keyword">FOREIGN</a> <a id="2452" class="Pragma">GHC</a> <a id="2456" class="Pragma">import</a> <a id="2463" class="Pragma">qualified</a> <a id="2473" class="Pragma">Data.Text.IO</a> <a id="2486" class="Pragma">as</a> <a id="2489" class="Pragma">TextIO</a> <a id="2496" class="Symbol">#-}</a>
<a id="2500" class="Symbol">{-#</a> <a id="2504" class="Keyword">COMPILE</a> <a id="2512" class="Keyword">GHC</a> <a id="2516" href="Main.html#2414" class="Postulate">putStrLn</a> <a id="2525" class="Pragma">=</a> <a id="2527" class="Pragma">TextIO.putStrLn</a> <a id="2543" class="Symbol">#-}</a>

<a id="2548" class="Comment">-- IO Stuff</a>

<a id="2561" class="Keyword">instance</a>
  <a id="IOMonad"></a><a id="2572" href="Main.html#2572" class="Function">IOMonad</a> <a id="2580" class="Symbol">:</a> <a id="2582" href="Utils.html#2832" class="Record">Monad</a> <a id="2588" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a>
  <a id="2593" href="Main.html#2572" class="Function">IOMonad</a> <a id="2601" class="Symbol">=</a> <a id="2603" class="Keyword">record</a> <a id="2610" class="Symbol">{</a> <a id="2612" href="Utils.html#2879" class="Field">return</a> <a id="2619" class="Symbol">=</a> <a id="2621" href="IO.Primitive.html#570" class="Postulate">IO.return</a><a id="2630" class="Symbol">;</a> <a id="2632" href="Utils.html#2907" class="Field Operator">_&gt;&gt;=_</a> <a id="2638" class="Symbol">=</a> <a id="2640" href="IO.Primitive.html#610" class="Postulate Operator">IO._&gt;&gt;=_</a> <a id="2649" class="Symbol">}</a>

<a id="2652" class="Comment">-- Parsing stuff</a>

<a id="2670" class="Keyword">postulate</a>
  <a id="FilePath"></a><a id="2682" href="Main.html#2682" class="Postulate">FilePath</a> <a id="2691" class="Symbol">:</a> <a id="2693" href="Agda.Primitive.html#388" class="Primitive">Set</a>

<a id="2698" class="Symbol">{-#</a> <a id="2702" class="Keyword">COMPILE</a> <a id="2710" class="Keyword">GHC</a> <a id="2714" href="Main.html#2682" class="Postulate">FilePath</a> <a id="2723" class="Pragma">=</a> <a id="2725" class="Pragma">type</a> <a id="2730" class="Pragma">FilePath</a> <a id="2739" class="Symbol">#-}</a>

<a id="2744" class="Comment">-- System.Exit stuff</a>

<a id="2766" class="Keyword">postulate</a>
  <a id="exitFailure"></a><a id="2778" href="Main.html#2778" class="Postulate">exitFailure</a> <a id="2790" class="Symbol">:</a> <a id="2792" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="2795" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="exitSuccess"></a><a id="2799" href="Main.html#2799" class="Postulate">exitSuccess</a> <a id="2811" class="Symbol">:</a> <a id="2813" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="2816" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="2819" class="Symbol">{-#</a> <a id="2823" class="Keyword">FOREIGN</a> <a id="2831" class="Pragma">GHC</a> <a id="2835" class="Pragma">import</a> <a id="2842" class="Pragma">System.Exit</a> <a id="2854" class="Symbol">#-}</a>
<a id="2858" class="Symbol">{-#</a> <a id="2862" class="Keyword">COMPILE</a> <a id="2870" class="Keyword">GHC</a> <a id="2874" href="Main.html#2799" class="Postulate">exitSuccess</a> <a id="2886" class="Pragma">=</a> <a id="2888" class="Pragma">exitSuccess</a> <a id="2900" class="Symbol">#-}</a>
<a id="2904" class="Symbol">{-#</a> <a id="2908" class="Keyword">COMPILE</a> <a id="2916" class="Keyword">GHC</a> <a id="2920" href="Main.html#2778" class="Postulate">exitFailure</a> <a id="2932" class="Pragma">=</a> <a id="2934" class="Pragma">exitFailure</a> <a id="2946" class="Symbol">#-}</a>

<a id="2951" class="Comment">-- Input Options stuff</a>
<a id="2974" class="Symbol">{-#</a> <a id="2978" class="Keyword">FOREIGN</a> <a id="2986" class="Pragma">GHC</a> <a id="2990" class="Pragma">import</a> <a id="2997" class="Pragma">Opts</a> <a id="3002" class="Symbol">#-}</a>

<a id="3007" class="Keyword">data</a> <a id="EvalOptions"></a><a id="3012" href="Main.html#3012" class="Datatype">EvalOptions</a> <a id="3024" class="Symbol">(</a><a id="3025" href="Main.html#3025" class="Bound">A</a> <a id="3027" class="Symbol">:</a> <a id="3029" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3032" class="Symbol">)</a> <a id="3034" class="Symbol">:</a> <a id="3036" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3040" class="Keyword">where</a>
  <a id="EvalOptions.EvalOpts"></a><a id="3048" href="Main.html#3048" class="InductiveConstructor">EvalOpts</a> <a id="3057" class="Symbol">:</a> <a id="3059" href="Evaluator.Program.html#2109" class="Postulate">Input</a> <a id="3065" class="Symbol">→</a> <a id="3067" href="Evaluator.Program.html#2093" class="Postulate">Format</a> <a id="3074" class="Symbol">→</a> <a id="3076" href="Evaluator.Program.html#3920" class="Datatype">EvalMode</a> <a id="3085" class="Symbol">→</a> <a id="3087" href="Evaluator.Program.html#3713" class="Datatype">BudgetMode</a> <a id="3098" href="Main.html#3025" class="Bound">A</a> <a id="3100" class="Symbol">→</a> <a id="3102" href="Main.html#3012" class="Datatype">EvalOptions</a> <a id="3114" href="Main.html#3025" class="Bound">A</a>

<a id="3117" class="Symbol">{-#</a> <a id="3121" class="Keyword">COMPILE</a> <a id="3129" class="Keyword">GHC</a> <a id="3133" href="Main.html#3012" class="Datatype">EvalOptions</a> <a id="3145" class="Pragma">=</a> <a id="3147" class="Pragma">data</a> <a id="3152" class="Pragma">EvalOptions</a> <a id="3164" class="Pragma">(EvalOpts)</a> <a id="3175" class="Symbol">#-}</a>

<a id="3180" class="Keyword">data</a> <a id="TypecheckOptions"></a><a id="3185" href="Main.html#3185" class="Datatype">TypecheckOptions</a> <a id="3202" class="Symbol">:</a> <a id="3204" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3208" class="Keyword">where</a>
  <a id="TypecheckOptions.TCOpts"></a><a id="3216" href="Main.html#3216" class="InductiveConstructor">TCOpts</a> <a id="3223" class="Symbol">:</a> <a id="3225" href="Evaluator.Program.html#2109" class="Postulate">Input</a> <a id="3231" class="Symbol">→</a> <a id="3233" href="Evaluator.Program.html#2093" class="Postulate">Format</a> <a id="3240" class="Symbol">→</a> <a id="3242" href="Main.html#3185" class="Datatype">TypecheckOptions</a>

<a id="3260" class="Symbol">{-#</a> <a id="3264" class="Keyword">COMPILE</a> <a id="3272" class="Keyword">GHC</a> <a id="3276" href="Main.html#3185" class="Datatype">TypecheckOptions</a> <a id="3293" class="Pragma">=</a> <a id="3295" class="Pragma">data</a> <a id="3300" class="Pragma">TypecheckOptions</a> <a id="3317" class="Pragma">(TCOpts)</a> <a id="3326" class="Symbol">#-}</a>

<a id="3331" class="Keyword">data</a> <a id="Command"></a><a id="3336" href="Main.html#3336" class="Datatype">Command</a> <a id="3344" class="Symbol">(</a><a id="3345" href="Main.html#3345" class="Bound">A</a> <a id="3347" class="Symbol">:</a> <a id="3349" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3352" class="Symbol">)</a> <a id="3354" class="Symbol">:</a> <a id="3356" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3360" class="Keyword">where</a>
  <a id="Command.Eval"></a><a id="3368" href="Main.html#3368" class="InductiveConstructor">Eval</a>  <a id="3374" class="Symbol">:</a> <a id="3376" href="Main.html#3012" class="Datatype">EvalOptions</a> <a id="3388" href="Main.html#3345" class="Bound">A</a> <a id="3390" class="Symbol">→</a> <a id="3392" href="Main.html#3336" class="Datatype">Command</a> <a id="3400" href="Main.html#3345" class="Bound">A</a>
  <a id="Command.Typecheck"></a><a id="3404" href="Main.html#3404" class="InductiveConstructor">Typecheck</a> <a id="3414" class="Symbol">:</a> <a id="3416" href="Main.html#3185" class="Datatype">TypecheckOptions</a> <a id="3433" class="Symbol">→</a> <a id="3435" href="Main.html#3336" class="Datatype">Command</a> <a id="3443" href="Main.html#3345" class="Bound">A</a>

<a id="3446" class="Symbol">{-#</a> <a id="3450" class="Keyword">COMPILE</a> <a id="3458" class="Keyword">GHC</a> <a id="3462" href="Main.html#3336" class="Datatype">Command</a> <a id="3470" class="Pragma">=</a> <a id="3472" class="Pragma">data</a> <a id="3477" class="Pragma">Command</a> <a id="3485" class="Pragma">(Eval</a> <a id="3491" class="Pragma">|</a> <a id="3493" class="Pragma">Typecheck)</a> <a id="3504" class="Symbol">#-}</a>

<a id="3509" class="Symbol">{-#</a> <a id="3513" class="Keyword">FOREIGN</a> <a id="3521" class="Pragma">GHC</a> <a id="3525" class="Pragma">import</a> <a id="3532" class="Pragma">PlutusCore.Executable.Common</a>  <a id="3562" class="Symbol">#-}</a>
<a id="3566" class="Symbol">{-#</a> <a id="3570" class="Keyword">FOREIGN</a> <a id="3578" class="Pragma">GHC</a> <a id="3582" class="Pragma">import</a> <a id="3589" class="Pragma">PlutusCore.Executable.Parsers</a> <a id="3619" class="Symbol">#-}</a>

<a id="3624" class="Keyword">postulate</a> 
   <a id="execP"></a><a id="3638" href="Main.html#3638" class="Postulate">execP</a> <a id="3644" class="Symbol">:</a> <a id="3646" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="3649" class="Symbol">(</a><a id="3650" href="Main.html#3336" class="Datatype">Command</a> <a id="3658" href="Cost.Raw.html#4818" class="Function">RawCostModel</a><a id="3670" class="Symbol">)</a>
   <a id="parse"></a><a id="3675" href="Main.html#3675" class="Postulate">parse</a> <a id="3681" class="Symbol">:</a> <a id="3683" href="Evaluator.Program.html#2093" class="Postulate">Format</a> <a id="3690" class="Symbol">→</a> <a id="3692" href="Evaluator.Program.html#2109" class="Postulate">Input</a> <a id="3698" class="Symbol">→</a> <a id="3700" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="3703" href="Evaluator.Program.html#2215" class="Postulate">ProgramN</a>
   <a id="parseU"></a><a id="3715" href="Main.html#3715" class="Postulate">parseU</a> <a id="3722" class="Symbol">:</a> <a id="3724" href="Evaluator.Program.html#2093" class="Postulate">Format</a> <a id="3731" class="Symbol">→</a> <a id="3733" href="Evaluator.Program.html#2109" class="Postulate">Input</a> <a id="3739" class="Symbol">→</a> <a id="3741" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="3744" href="Evaluator.Program.html#2335" class="Postulate">ProgramNU</a>

<a id="3755" class="Symbol">{-#</a> <a id="3759" class="Keyword">COMPILE</a> <a id="3767" class="Keyword">GHC</a> <a id="3771" href="Main.html#3638" class="Postulate">execP</a> <a id="3777" class="Pragma">=</a> <a id="3779" class="Pragma">execP</a> <a id="3785" class="Symbol">#-}</a>
<a id="3789" class="Symbol">{-#</a> <a id="3793" class="Keyword">COMPILE</a> <a id="3801" class="Keyword">GHC</a> <a id="3805" href="Main.html#3675" class="Postulate">parse</a> <a id="3811" class="Pragma">=</a> <a id="3813" class="Pragma">readProgram</a> <a id="3825" class="Symbol">#-}</a>
<a id="3829" class="Symbol">{-#</a> <a id="3833" class="Keyword">COMPILE</a> <a id="3841" class="Keyword">GHC</a> <a id="3845" href="Main.html#3715" class="Postulate">parseU</a> <a id="3852" class="Pragma">=</a> <a id="3854" class="Pragma">readProgram</a> <a id="3866" class="Symbol">#-}</a>

<a id="evalInput"></a><a id="3871" href="Main.html#3871" class="Function">evalInput</a> <a id="3881" class="Symbol">:</a> <a id="3883" href="Evaluator.Program.html#3920" class="Datatype">EvalMode</a> <a id="3892" class="Symbol">→</a>  <a id="3895" href="Evaluator.Program.html#3713" class="Datatype">BudgetMode</a> <a id="3906" href="Cost.Raw.html#4818" class="Function">RawCostModel</a> <a id="3919" class="Symbol">→</a> <a id="3921" href="Evaluator.Program.html#2093" class="Postulate">Format</a> <a id="3928" class="Symbol">→</a> <a id="3930" href="Evaluator.Program.html#2109" class="Postulate">Input</a> <a id="3936" class="Symbol">→</a> <a id="3938" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="3941" class="Symbol">(</a><a id="3942" href="Utils.html#1092" class="Datatype">Either</a> <a id="3949" href="Evaluator.Base.html#1210" class="Datatype">ERROR</a> <a id="3955" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="3961" class="Symbol">)</a>
<a id="3963" href="Main.html#3871" class="Function">evalInput</a> <a id="3973" href="Evaluator.Program.html#3943" class="InductiveConstructor">U</a> <a id="3975" href="Main.html#3975" class="Bound">bm</a> <a id="3978" href="Main.html#3978" class="Bound">fmt</a> <a id="3982" href="Main.html#3982" class="Bound">inp</a> <a id="3986" class="Symbol">=</a> <a id="3988" href="Utils.html#3015" class="Function">fmap</a> <a id="3993" class="Symbol">(</a><a id="3994" href="Evaluator.Program.html#7436" class="Function">evalProgramNU</a> <a id="4008" href="Main.html#3975" class="Bound">bm</a><a id="4010" class="Symbol">)</a> <a id="4012" class="Symbol">(</a><a id="4013" href="Main.html#3715" class="Postulate">parseU</a> <a id="4020" href="Main.html#3978" class="Bound">fmt</a> <a id="4024" href="Main.html#3982" class="Bound">inp</a><a id="4027" class="Symbol">)</a>
<a id="4029" href="Main.html#3871" class="CatchallClause Function">evalInput</a><a id="4038" class="CatchallClause"> </a><a id="4039" href="Main.html#4039" class="CatchallClause Bound">m</a><a id="4040" class="CatchallClause"> </a><a id="4041" class="CatchallClause Symbol">_</a><a id="4042" class="CatchallClause"> </a><a id="4043" href="Main.html#4043" class="CatchallClause Bound">fmt</a><a id="4046" class="CatchallClause"> </a><a id="4047" href="Main.html#4047" class="CatchallClause Bound">inp</a>  <a id="4052" class="Symbol">=</a> <a id="4054" href="Utils.html#3015" class="Function">fmap</a> <a id="4059" class="Symbol">(</a><a id="4060" href="Evaluator.Program.html#7588" class="Function">evalProgramN</a> <a id="4073" href="Main.html#4039" class="Bound">m</a><a id="4074" class="Symbol">)</a> <a id="4076" class="Symbol">(</a><a id="4077" href="Main.html#3675" class="Postulate">parse</a> <a id="4083" href="Main.html#4043" class="Bound">fmt</a> <a id="4087" href="Main.html#4047" class="Bound">inp</a><a id="4090" class="Symbol">)</a>

<a id="tcInput"></a><a id="4093" href="Main.html#4093" class="Function">tcInput</a> <a id="4101" class="Symbol">:</a> <a id="4103" href="Evaluator.Program.html#2093" class="Postulate">Format</a> <a id="4110" class="Symbol">→</a> <a id="4112" href="Evaluator.Program.html#2109" class="Postulate">Input</a> <a id="4118" class="Symbol">→</a> <a id="4120" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="4123" class="Symbol">(</a><a id="4124" href="Utils.html#1092" class="Datatype">Either</a> <a id="4131" href="Evaluator.Base.html#1210" class="Datatype">ERROR</a> <a id="4137" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="4143" class="Symbol">)</a>
<a id="4145" href="Main.html#4093" class="Function">tcInput</a> <a id="4153" href="Main.html#4153" class="Bound">fmt</a> <a id="4157" href="Main.html#4157" class="Bound">inp</a> <a id="4161" class="Symbol">=</a> <a id="4163" href="Utils.html#3015" class="Function">fmap</a> <a id="4168" href="Evaluator.Program.html#8424" class="Function">typeCheckProgramN</a> <a id="4186" class="Symbol">(</a><a id="4187" href="Main.html#3675" class="Postulate">parse</a> <a id="4193" href="Main.html#4153" class="Bound">fmt</a> <a id="4197" href="Main.html#4157" class="Bound">inp</a><a id="4200" class="Symbol">)</a>

<a id="main&#39;"></a><a id="4203" href="Main.html#4203" class="Function">main&#39;</a> <a id="4209" class="Symbol">:</a> <a id="4211" href="Main.html#3336" class="Datatype">Command</a> <a id="4219" href="Cost.Raw.html#4818" class="Function">RawCostModel</a> <a id="4232" class="Symbol">→</a> <a id="4234" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="4237" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="4239" href="Main.html#4203" class="Function">main&#39;</a> <a id="4245" class="Symbol">(</a><a id="4246" href="Main.html#3368" class="InductiveConstructor">Eval</a> <a id="4251" class="Symbol">(</a><a id="4252" href="Main.html#3048" class="InductiveConstructor">EvalOpts</a> <a id="4261" href="Main.html#4261" class="Bound">inp</a> <a id="4265" href="Main.html#4265" class="Bound">fmt</a> <a id="4269" href="Main.html#4269" class="Bound">m</a> <a id="4271" href="Main.html#4271" class="Bound">bm</a><a id="4273" class="Symbol">))</a> <a id="4276" class="Symbol">=</a> <a id="4278" class="Keyword">do</a>
  <a id="4283" href="Utils.html#1149" class="InductiveConstructor">inj₂</a> <a id="4288" href="Main.html#4288" class="Bound">s</a> <a id="4290" href="Utils.html#2907" class="Field Operator">←</a> <a id="4292" href="Main.html#3871" class="Function">evalInput</a> <a id="4302" href="Main.html#4269" class="Bound">m</a> <a id="4304" href="Main.html#4271" class="Bound">bm</a> <a id="4307" href="Main.html#4265" class="Bound">fmt</a> <a id="4311" href="Main.html#4261" class="Bound">inp</a>
    <a id="4319" class="Keyword">where</a>
    <a id="4329" href="Utils.html#1125" class="InductiveConstructor">inj₁</a> <a id="4334" href="Main.html#4334" class="Bound">e</a> <a id="4336" class="Symbol">→</a> <a id="4338" href="Main.html#2414" class="Postulate">putStrLn</a> <a id="4347" class="Symbol">(</a><a id="4348" href="Evaluator.Base.html#2586" class="Function">reportError</a> <a id="4360" href="Main.html#4334" class="Bound">e</a><a id="4361" class="Symbol">)</a> <a id="4363" href="Utils.html#2951" class="Function Operator">&gt;&gt;</a> <a id="4366" href="Main.html#2778" class="Postulate">exitFailure</a>
  <a id="4380" href="Main.html#2414" class="Postulate">putStrLn</a> <a id="4389" href="Main.html#4288" class="Bound">s</a> <a id="4391" href="Utils.html#2951" class="Function Operator">&gt;&gt;</a> <a id="4394" href="Main.html#2799" class="Postulate">exitSuccess</a>
<a id="4406" href="Main.html#4203" class="Function">main&#39;</a> <a id="4412" class="Symbol">(</a><a id="4413" href="Main.html#3404" class="InductiveConstructor">Typecheck</a> <a id="4423" class="Symbol">(</a><a id="4424" href="Main.html#3216" class="InductiveConstructor">TCOpts</a> <a id="4431" href="Main.html#4431" class="Bound">inp</a> <a id="4435" href="Main.html#4435" class="Bound">fmt</a><a id="4438" class="Symbol">))</a>    <a id="4444" class="Symbol">=</a> <a id="4446" class="Keyword">do</a>
  <a id="4451" href="Utils.html#1149" class="InductiveConstructor">inj₂</a> <a id="4456" href="Main.html#4456" class="Bound">s</a> <a id="4458" href="Utils.html#2907" class="Field Operator">←</a> <a id="4460" href="Main.html#4093" class="Function">tcInput</a> <a id="4468" href="Main.html#4435" class="Bound">fmt</a> <a id="4472" href="Main.html#4431" class="Bound">inp</a>
    <a id="4480" class="Keyword">where</a>
    <a id="4490" href="Utils.html#1125" class="InductiveConstructor">inj₁</a> <a id="4495" href="Main.html#4495" class="Bound">e</a> <a id="4497" class="Symbol">→</a> <a id="4499" href="Main.html#2414" class="Postulate">putStrLn</a> <a id="4508" class="Symbol">(</a><a id="4509" href="Evaluator.Base.html#2586" class="Function">reportError</a> <a id="4521" href="Main.html#4495" class="Bound">e</a><a id="4522" class="Symbol">)</a> <a id="4524" href="Utils.html#2951" class="Function Operator">&gt;&gt;</a> <a id="4527" href="Main.html#2778" class="Postulate">exitFailure</a>
  <a id="4541" href="Main.html#2414" class="Postulate">putStrLn</a> <a id="4550" href="Main.html#4456" class="Bound">s</a> <a id="4552" href="Utils.html#2951" class="Function Operator">&gt;&gt;</a> <a id="4555" href="Main.html#2799" class="Postulate">exitSuccess</a>

<a id="main"></a><a id="4568" href="Main.html#4568" class="Function">main</a> <a id="4573" class="Symbol">:</a> <a id="4575" href="Agda.Builtin.IO.html#137" class="Postulate">IO</a> <a id="4578" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="4580" href="Main.html#4568" class="Function">main</a> <a id="4585" class="Symbol">=</a> <a id="4587" href="Main.html#3638" class="Postulate">execP</a> <a id="4593" href="Utils.html#2907" class="Field Operator">&gt;&gt;=</a> <a id="4597" href="Main.html#4203" class="Function">main&#39;</a>
</pre>